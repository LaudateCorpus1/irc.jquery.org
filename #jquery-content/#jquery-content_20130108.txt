[04:47:27] <jqcommit> 01[13api.qunitjs.com01] 15jzaefferer pushed 1 new commit to 06master: 02http://git.io/W2rEOw
[04:47:27] <jqcommit> 13api.qunitjs.com/06master 14995dd1f 15J√∂rn Zaefferer: Fix copy/paste issue in moduleDone code example. Fixes #19
[04:49:40] <jqcommit> 01[13api.qunitjs.com01] 15jzaefferer tagged 061.10.0-1 at 06master: 02http://git.io/NIP4ig
[05:03:01] <jqcommit> 01[13api.qunitjs.com01] 15scottgonzalez pushed 1 new commit to 06master: 02http://git.io/o4coOQ
[05:03:01] <jqcommit> 13api.qunitjs.com/06master 144f5cad4 15Scott Gonz√°lez: Upgrade to grunt-jquery-content 0.8.1.
[05:23:08] <jquicommit> 01[13api.jqueryui.com01] 15scottgonzalez pushed 1 new commit to 06master: 02http://git.io/Jz0hAw
[05:23:08] <jquicommit> 13api.jqueryui.com/06master 14a4cd708 15Scott Gonz√°lez: Comment out link to learn site until it launches.
[05:24:05] <jquicommit> 01[13api.jqueryui.com01] 15scottgonzalez pushed 1 new commit to 061-8: 02http://git.io/zgxBSQ
[05:24:05] <jquicommit> 13api.jqueryui.com/061-8 144bed92d 15Scott Gonz√°lez: Comment out link to learn site until it launches.
[05:39:49] <jqcommit> 01[13qunitjs.com01] 15scottgonzalez pushed 1 new commit to 06master: 02http://git.io/vn8NBQ
[05:39:49] <jqcommit> 13qunitjs.com/06master 143b57356 15Scott Gonz√°lez: Upgrade to grunt-jquery-content 0.8.1.
[05:54:27] <scott_gonzalez> danheberden: I just did some debugging on that template issue. It's entirely possible that the template is not being used even though the deploy was successful.
[05:54:41] <scott_gonzalez> https://github.com/scottgonzalez/grunt-wordpress/issues/10#issuecomment-11997714
[06:11:01] <jqcommit> 01[13web-base-template01] 15ajpiano pushed 1 new commit to 06master: 02http://git.io/lwyDaw
[06:11:01] <jqcommit> 13web-base-template/06master 14a2b442c 15adam j. sontag: Fix font-size declarations for headers inside of #content
[06:11:38] <jqcommit> 01[13web-base-template01] 15ajpiano 04deleted 0655-highlightjs-experimentation at 14bb51ef9: 02http://git.io/4Wp5Hw
[06:11:44] <jqcommit> 01[13web-base-template01] 15ajpiano 04deleted 06add_contribute_site at 1455cefce: 02http://git.io/cVi6zw
[06:12:17] <jqcommit> 01[13web-base-template01] 15ajpiano 04deleted 06syntaxhighlighter-css-update at 14f4f71d0: 02http://git.io/h66uwg
[06:12:55] <jqcommit> 01[13web-base-template01] 15ajpiano 04deleted 06learn-homepage-draft at 1416cd64c: 02http://git.io/UkXdlw
[06:13:42] <jqcommit> 01[13web-base-template01] 15ajpiano 04deleted 06brand.jquery.org at 144865d4d: 02http://git.io/6-wxmg
[06:14:03] <jqcommit> 01[13web-base-template01] 15ajpiano 04deleted 06new-css-highlightjs-integration at 148e343d9: 02http://git.io/gOVx7Q
[06:14:12] <scott_gonzalez> ZOMG cleanup
[06:14:34] <ajpiano> scott_gonzalez: :D
[06:14:45] <ajpiano> "search-results" and "style-updates" are also good to delete, yeah?
[06:15:20] <ajpiano> no activiity in 4 and 5 months respectively
[06:15:51] <scott_gonzalez> Let me see what the commits are in there.
[06:16:34] <scott_gonzalez> Yeah, they're both going to be invalid with new-css.
[06:17:00] <ajpiano> cool i'll delete
[06:17:24] <jqcommit> 01[13web-base-template01] 15ajpiano 04deleted 06search-results at 147760d27: 02http://git.io/TF78EA
[06:17:39] <jqcommit> 01[13web-base-template01] 15ajpiano 04deleted 06style-updates at 14589eeed: 02http://git.io/G7GiKQ
[06:21:25] <scott_gonzalez> I had an item on my todo list to delete old branches after the big deploy.
[06:21:43] <ajpiano> i had a similar one for once syntax highlighting aws done
[06:22:14] <ajpiano> it sucks for new cloners to end up with a bunch of detritus
[06:22:24] <scott_gonzalez> yup
[06:22:39] <scott_gonzalez> So, are we still planning on deploying today or did you want one more day of staging?
[06:22:54] <scott_gonzalez> Looks like we're slowly finding things that need to be tweaked.
[06:24:21] <jqcommit> 01[13jquerymobile.com01] 15ajpiano pushed 1 new commit to 06master: 02http://git.io/8PK3vA
[06:24:21] <jqcommit> 13jquerymobile.com/06master 14b955e69 15adam j. sontag: Add grunt-check-modules dependency and task, upgrade to grunt-jquery-content 0.8.1
[06:24:26] <ajpiano> let's see what shakes out over the next few hours
[06:24:40] <ajpiano> i think deploying late today or first thing tomorrow would be best
[06:24:56] <ajpiano> i think i'm gonna bring down the font-size in the menu a bit after all
[06:25:04] <scott_gonzalez> ok
[06:25:11] <scott_gonzalez> I'm gonna try to get this RC out.
[06:25:20] <ajpiano> sounds good
[06:25:32] <ajpiano> i'm gonna make sure everything is on latest grunt-jquery-content
[06:27:07] <rworth> we forgot to bikeshed a new name for web-base-template. I think wp-content-jquery makes sense, but I tried it locally and it didn't seem to work
[06:27:53] <scott_gonzalez> rworth: Did you update wp-config.php
[06:27:56] <jqcommit> 01[13jquerymobile.com01] 15ajpiano pushed 1 new commit to 06master: 02http://git.io/4lZkZA
[06:27:56] <jqcommit> 13jquerymobile.com/06master 140ead0d4 15adam j. sontag: Use tabs instead of spaces in package.json, update description to be accurate
[06:28:03] <rworth> scott_gonzalez yeah
[06:28:18] <scott_gonzalez> And web-base-template/config.php?
[06:28:35] <ajpiano> rworth: scott_gonzalez we also should put instructions somewhere for people who have already been running web-base-template on how to deal with getting new master
[06:28:40] <ajpiano> (or do we need to)
[06:28:44] <ajpiano> cause a straight pull doesn't work obvi
[06:29:00] <scott_gonzalez> I think people will figure it out :-P
[06:29:02] <rworth> yeah, it's git reset --hard origin/master
[06:29:06] <scott_gonzalez> What did ben do with grunt?
[06:29:42] <rworth> scott_gonzalez I remember searching all of wordpress/web-base-template and replacing. I'll try again
[06:29:58] <rworth> that is, the wordpress folder, and the web-base-template folder
[06:32:18] <ajpiano> scott_gonzalez: not sure, i'll ask
[06:36:01] <rworth> ok, not sure why it didn't work before but it worked this time
[06:36:20] <rworth> might've been I didn't start MAMP this time until after the rename of the folder
[06:36:33] <rworth> where before it was running during the rename, so maybe it was holding on to the old
[06:36:40] <rworth> so ajpiano scott_gonzalez thoughts on the name?
[06:36:53] <scott_gonzalez> +1 wp-content-jquery
[06:37:17] <ajpiano> wp-content-jquery confuses me
[06:37:24] <rworth> as long as people need a new master, seems like a good time to do the rename
[06:37:29] <ajpiano> confirm
[06:37:41] <scott_gonzalez> ajpiano: Why does it confuse you?
[06:37:54] <scott_gonzalez> jquery-wp-content might be a better name.
[06:37:57] <ajpiano> cause it makes me think there's content in it
[06:38:07] <scott_gonzalez> wp-content is the name of the directory we're replacing.
[06:38:09] <ajpiano> but i get how it is a replacement for the wp-content directory or something
[06:38:09] <rworth> but it's jQuery's wp-content folder
[06:38:10] <ajpiano> right
[06:38:33] <scott_gonzalez> I actually like jquery-wp-content better because it pulls it away from the wp-* directories.
[06:38:35] <rworth> and it matches with people wanting to contribute on the content team :)
[06:40:06] <ajpiano> yeah, i definitely like jquery-wp-content
[06:40:10] <ajpiano> much better than wp-content-jquery
[06:40:14] <rworth> ok
[06:41:12] <scott_gonzalez> Good bike shedding everyone!
[06:41:22] <scott_gonzalez> Way to not waste a whole day on this.
[06:41:32] <ajpiano> what about
[06:41:35] <ajpiano> "blame-nacin"
[06:41:41] <ajpiano> :D
[06:41:52] <scott_gonzalez> heh
[06:44:45] <jqcommit> 01[13api.jquery.com01] 15kswedberg pushed 1 new commit to 06master: 02http://git.io/q-ywrg
[06:44:45] <jqcommit> 13api.jquery.com/06master 14a7f305f 15Karl Swedberg: Add events.js to /resources/ and update script reference in key* entries...
[06:45:41] <rworth> should I got ahead with the rename then?
[06:46:17] <scott_gonzalez> sure
[06:46:26] <scott_gonzalez> umm...wait
[06:46:31] <scott_gonzalez> don't do it until gnarf is around.
[06:46:37] <rworth> good thought
[06:47:10] <rworth> I'll prep a commit, but won't push until he's here. After the commit we can rename the repo and fix the servers
[06:49:37] <jqcommit> 01[13api.jquery.com01] 15kswedberg tagged 061.8.3-1 at 14557f9f5: 02http://git.io/EaL5NQ
[06:50:04] <kswedberg> I hope I just did that right.
[06:51:52] <scott_gonzalez> kswedberg: Looks right.
[06:52:20] <kswedberg> scott_gonzalez: cool. thx. so, when do the changes show up on the live site?
[06:52:40] <scott_gonzalez> About 1 minute after you push the tag.
[06:53:12] <kswedberg> yay. thx. as you can tell, I'm kind of nervous about this. 
[06:53:18] <ajpiano> kswedberg: you have to update the api entries though too
[06:53:41] <kswedberg> ajpiano: wat?
[06:53:47] <ajpiano> Show the event object when a key is pressed in the input. Note: This demo relies on a simple $.print() plugin (http://api.jquery.com/scripts/events.js) for the event object's output.
[06:54:00] <ajpiano> the path is explicitly referred to in the content of the api pages
[06:54:22] <ajpiano> oh god newb
[06:54:34] <kswedberg> ajpiano: https://github.com/jquery/api.jquery.com/commit/a7f305fbaaae69fca654384426c0f331dfe0d0b0
[06:54:40] <ajpiano> yeahi reallyesdssdfjkal
[06:54:58] <kswedberg> heh. you're playing my role!
[06:54:59] <scott_gonzalez> Hmm...still no email about the deploy.
[06:56:27] <scott_gonzalez> wow, I just typod "git push" three times in a row
[06:57:16] <rworth> and then typoed typoed ;)
[06:57:29] <kswedberg> rworth: you pedant! 
[06:57:48] <rworth> I learned it by watching *you* alright! I learned it by watching you
[06:57:49] <kswedberg> why is everyone taking over my roles today?
[06:58:16] <rworth> flattery
[07:02:05] <kswedberg> :)
[07:02:59] <kswedberg> scott_gonzalez: any idea why tagging didn't work for deploying it to api.jquery.com? 
[07:03:44] <scott_gonzalez> No, I didn't even get an email about it.
[07:04:15] <scott_gonzalez> Oh, actually yes.
[07:04:22] <scott_gonzalez> well, maybe.
[07:04:35] <scott_gonzalez> This is the first time that we're deploying that site.
[07:04:45] <jqcommit> 01[13web-base-template01] 15ajpiano pushed 1 new commit to 06master: 02http://git.io/XcgSKQ
[07:04:45] <jqcommit> 13web-base-template/06master 14e72125c 15adam j. sontag: Shrink main nag LI font size to allow more entries before line breaks
[07:04:45] <kswedberg> I guess that covers all the options (yes, no, maybe)'
[07:04:56] <scott_gonzalez> I can't be wrong!
[07:05:06] <kswedberg> exactly!
[07:05:19] <kswedberg> ajpiano: who is the main nag? ;)
[07:05:31] <kswedberg> gotta love the autocorrect
[07:05:39] <scott_gonzalez> gnarf ryanneufeld: api.jquery.com isn't deploying on tag.
[07:05:44] <ajpiano> gah
[07:05:52] <ajpiano> lolol
[07:06:06] <rworth> also gnarf let me know when you're around so we can coordinate on renaming of web-base-template
[07:06:29] <scott_gonzalez> Let me check the server and see if I can figure out what's going on.
[07:07:00] <scott_gonzalez> Are these high numbers? load average: 28.32, 28.34, 28.60
[07:07:06] <ryanneufeld> yes
[07:07:10] <ryanneufeld> very very high
[07:07:12] <scott_gonzalez> That's what I thought.
[07:07:13] <scott_gonzalez> That's jq01.
[07:07:18] <ryanneufeld> unless that machine has 30 cores
[07:08:23] <ryanneufeld> php5-fpm is hammering it it seems
[07:08:31] <scott_gonzalez> 4 cores
[07:14:03] <scott_gonzalez> So, how about that WP Super Cache plugin?
[07:14:14] <jqcommit> 01[13brand.jquery.org01] 15ajpiano pushed 1 new commit to 06master: 02http://git.io/9y_Hdw
[07:14:14] <jqcommit> 13brand.jquery.org/06master 14a883acc 15adam j. sontag: Upgrade to grunt-jquery-content 0.8.1
[07:14:40] <kswedberg> scott_gonzalez: :) I asked about caching the other day, but nobody answered. 
[07:14:46] <scott_gonzalez> I know :-)
[07:14:51] <rworth> me too :)
[07:15:28] <scott_gonzalez> rworth: I asked what level of caching we needed, but I either didn't understand the answer or missed the answer :-(
[07:15:46] <scott_gonzalez> I just checked blog.jqueryui.com and it's using WP Super Cache.
[07:15:49] <kswedberg> ah. doe we need nacin for this? 
[07:15:57] <kswedberg> *do
[07:16:01] <scott_gonzalez> So I assume that's what we want for new sites.
[07:16:16] <scott_gonzalez> I think I can get it working.
[07:16:24] <scott_gonzalez> I just need to download the plugin locally and add it to mu-plugins.
[07:16:30] <scott_gonzalez> I think
[07:16:31] <kswedberg> awesome! thx, scott_gonzalez 
[07:16:43] <rworth> then how do you configure it?
[07:16:44] <kswedberg> what about configuring it? I guess you have to 
[07:16:53] <kswedberg> ‚Ä¶go into wp admin for something?
[07:16:58] <rworth> caus we don't do anything via wp-admin
[07:17:08] <rworth> or it would be lost when the server is rebuilt
[07:17:52] <kswedberg> rworth: please stop sneaking into my brain
[07:18:01] <rworth> :)
[07:18:17] <rworth> hey nacin 
[07:18:18] <scott_gonzalez> hmm...actually I'm not sure about this, since there are settings within the plugin that need to be turned on.
[07:18:44] <kswedberg> scott_gonzalez: yeah, what we said ‚Üë
[07:19:03] <kswedberg> :)
[07:19:09] <rworth> nacin how do we configure a plugin ( WP Super Cache ) without wp-admin ?
[07:19:16] <scott_gonzalez> WHATEVER! I was busy reading about the plugin :-P
[07:19:41] <scott_gonzalez> Whoa. nacin, were your ears ringing?
[07:20:28] <kswedberg> hi nacin!
[07:20:38] <scott_gonzalez> nacin is talking to himself in #wordpress-dev :-P
[07:20:51] <ryanneufeld> I'm afk for about an hour now. Only thing I can see is that there is a lot of php-fpm and mysql instances, and the php fpms are using most of the cpu
[07:22:24] <scott_gonzalez> kswedberg: deploy just failed for api.jquery.com.
[07:22:25] <scott_gonzalez> >> Error editing post fadeOut...
[07:22:25] <scott_gonzalez> >> Error: Unknown XML-RPC tag 'TITLE'
[07:22:25] <scott_gonzalez> <WARN> Task "wordpress-sync" failed.  Use --force to continue. </WARN>
[07:22:25] <scott_gonzalez> Aborted due to warnings.
[07:22:25] <scott_gonzalez> Exit Code: 3
[07:22:43] <scott_gonzalez> That could just be the server melting though.
[07:23:10] <kswedberg> yeah, weird. running grunt deploy locally should catch something like that, right? if it were real?
[07:23:26] <scott_gonzalez> yeah
[07:23:31] <jqcommit> 01[13web-base-template01] 15ajpiano pushed 1 new commit to 06master: 02http://git.io/fEqtNw
[07:23:31] <jqcommit> 13web-base-template/06master 1469a0e38 15adam j. sontag: brand.jquery.org: Add trailing slashes to sidebar links before anchors
[07:23:51] <scott_gonzalez> I have a feeling it got a 500 or something and then the XML-RPC module errored out on the HTML response.
[07:25:27] <kswedberg> huh
[07:25:52] <scott_gonzalez> oh boy, it's getting worse: load average: 33.36, 31.51, 30.06
[07:26:24] <kswedberg> I feel inept. All I can do is sit and watch. 
[07:26:37] <jqcommit> 01[13brand.jquery.org01] 15ajpiano pushed 1 new commit to 06master: 02http://git.io/X-vqCw
[07:26:37] <jqcommit> 13brand.jquery.org/06master 144504136 15adam j. sontag: Add my middle initial
[07:26:46] <scott_gonzalez> So, if we manually install the cache plugin and enable it, that's fine as a stopgap, right?
[07:27:45] <kswedberg> sure, as a stopgap, I guess. then any time a tag gets deployed (*if* it gets deployed), we'd have to reinstall it. right?
[07:27:59] <rworth> no
[07:28:00] <kswedberg> until a better solution is worked out
[07:28:07] <kswedberg> rworth: no?
[07:28:10] <rworth> just when the prod server gets rebuilt
[07:28:17] <rworth> like when Adam deletes the whole plugins site ;)
[07:28:24] <kswedberg> oh! 
[07:28:47] <kswedberg> well, in that case, let's stop fretting and just do it, huh?
[07:28:53] <rworth> +1
[07:28:59] <ajpiano> wait, you want me to delete the plugins site right now, kswedberg ?
[07:28:59] <scott_gonzalez> Ok, I'll do it for api.jquery.com
[07:29:11] <scott_gonzalez> I think that's the probably the biggest problem right now.
[07:29:12] <kswedberg> thanks, scott_gonzalez 
[07:29:21] <kswedberg> ajpiano: nooooooooooooooo!
[07:31:23] <scott_gonzalez> hah http://jquery.com/wp-admin/network/ goes into a redirect loop
[07:33:36] <rworth> awesome. so we have to wait for nacin 
[07:33:55] <kswedberg> nacin: you're our only hope!
[07:35:28] <gnarf> rworth: pong
[07:35:30] <nacin> yo
[07:35:42] <rworth> they're both here :)
[07:35:53] <ryanneufeld> and what timing
[07:36:07] <rworth> gnarf I'm ready to rename web-base-template to jquery-wp-content
[07:36:10] <nacin> those load averages aren't very good...
[07:36:16] <rworth> first with a commit to update config files
[07:36:22] <rworth> then I'll rename the repo
[07:36:30] <rworth> but my guess is that'll hose the server
[07:36:47] <rworth> it'll need a clean checkout of the newly named repo?
[07:37:05] <nacin> we can do some stuff at the nginx level to bring those averages way down
[07:37:05] <rworth> plugin wp-config.php is created by puppet? and will need to be updated to reflect the rename
[07:37:10] <gnarf> rworth: yeah - gotta do some tweaking
[07:37:19] <gnarf> nacin: suggestions?
[07:37:22] <nacin> which server?
[07:37:22] <rworth> gnarf let me know when you're ready
[07:37:33] <rworth> and this caching thing is way higher priority
[07:38:01] <nacin> I see 26.44, 28.86, 29.71 on jq01
[07:38:10] <gnarf> so this is because api.jquery.com is on it now
[07:39:08] <gnarf> http://cl.ly/image/1Y14001h3W2Z
[07:39:22] <gnarf> I could spread out the load into two servers
[07:39:35] <gnarf> unless you have an idea on how to bring it down
[07:40:06] <scott_gonzalez> nacin: We want to enable WP Super Cache for all sites.
[07:40:27] <scott_gonzalez> I'm in the middle of adding it, but I assume you'll get it done much faster than me.
[07:41:37] <nacin> scott_gonzalez: I'm looking at the nginx level, which is going to be far more effective than any WP plugin
[07:42:04] <gnarf> nacin: we already have the microcache stuff turned on
[07:42:13] <nacin> I doubt it's working if the load is that high
[07:44:32] <gnarf> maybe the cookie detection is too open?
[07:44:39] <nacin> doubtful.
[07:44:59] <gnarf> nacin: https://github.com/jquery/infrastructure/blob/puppet-master/modules/wordpress/files/microcache_fastcgi_params#L33
[07:45:19] <nacin> nah, no users will have any of those
[07:45:52] <nacin> so, think it might be that it is only included inside the \.php$ location block
[07:46:01] <nacin> should be moved to /
[07:46:39] <nacin> I haven't touched nginx in a few months, so need a moment
[07:46:43] <gnarf> nacin: i get 400ms response times in a incognito window
[07:46:51] <gnarf> but 4second in my "logged in" window
[07:47:06] <gnarf> seems to tell me that there definitely is caching for people without cookies
[07:47:13] <nacin> gnarf: are you actually logged in?
[07:47:27] <gnarf> nacin: no, but i have a cookie over on that side
[07:47:51] <gnarf> wordpress_logged_in_cb1a1e7946ce02aec0d7d01006612a4f=admin in my cookies
[07:47:54] <gnarf> makes it not cache
[07:48:06] <gnarf> testing on URL http://api.jquery.com/jQuery.ajax/
[07:49:26] <gnarf> nacin: the try_files in / will send it to .php$
[07:49:40] <gnarf> so anything fed through .php is microcached
[07:50:57] <gnarf> we could lower the minimum number of hits to cache at
[07:51:08] <gnarf> but really, for being under this much load, its behaving pretty well
[07:51:28] <gnarf> I still can't figure out what's causing the wp-admin/network redirect on jquery.com
[07:51:32] <gnarf> its inside PHP not nginx
[07:51:35] <gnarf> i know that for sure
[07:52:26] <scott_gonzalez> I don't get the redirect on my local install.
[07:52:44] <gnarf> the redirect response includes X-Served-By: PHP
[07:52:52] <gnarf> or whatever that header is
[07:52:55] <nacin> I can look at the redirect in a bit
[07:53:01] <nacin> how serious is the server load?
[07:53:17] <gnarf> i mean, its serious, but its serving pages
[07:53:20] <nacin> is it simply high load, or is this a critical issue that is resulting in reduced availability?
[07:53:33] <gnarf> it's also rising
[07:53:51] <gnarf> i think this is just a high traffic day
[07:54:01] <ajpiano> people have been complaining about site load times a lot though, fwiw
[07:54:31] <kswedberg> scott_gonzalez: do you think the inability of the tag -> deploy mechanism is related to the high server load?
[07:54:59] <gnarf> http://cl.ly/image/1u292H0l2t31 (re the redirect issue btw)
[07:55:10] <scott_gonzalez> kswedberg: It's possible. That's why I said I think we it got a 500 during the deploy and then choked on the HTML response.
[07:56:14] <scott_gonzalez> nacin: We have a history of our servers melting without WP Super Cache enabled.
[07:56:27] <scott_gonzalez> It's happened to us multiple times with new sites.
[07:56:38] <nacin> it'll help, sure, but it's a lame solution when nginx should be able to handle this.
[07:56:55] <gnarf> scott_gonzalez: nginx's microcache is doing super cache's job fwiw
[07:57:00] <gnarf> or it should be
[07:57:18] <gnarf> I'm going to work on adding some logging on if micro cache is getting used
[07:57:25] <scott_gonzalez> Can we try installing it and just see if it helps?
[07:57:42] <scott_gonzalez> If it does, then it's a good stopgap until we get nginx configured properly.
[07:57:48] <scott_gonzalez> If it doesn't, we can just remove it.
[08:07:43] <nacin> load average now down to 3.97
[08:07:46] <nacin> over the last minute
[08:09:17] <scott_gonzalez> Did you change anything or did something just die off?
[08:09:25] <gnarf> no change here
[08:09:27] <nacin> I made an adjustment to the microcache config
[08:09:35] <gnarf> which was?
[08:09:49] <nacin> trying to isolate which change dropped the load off
[08:10:25] <gnarf> i thought upping it to 60s was a good idea too
[08:10:27] <gnarf> did that one myself
[08:10:33] <gnarf> also lowered 3 hits to 1
[08:10:39] <nacin> I did the 60s :)
[08:11:10] <gnarf> nacin: yeah, i was testing something else on my local first
[08:11:11] <gnarf> before pushing it
[08:11:36] <gnarf> so, can we get the load back if we set it to 5s again?
[08:11:56] <nacin> wasn't the only change, checking it out
[08:12:04] <gnarf> what was the other?
[08:12:13] <nacin> adding 304
[08:12:20] <nacin> which I now just removed
[08:12:20] <scott_gonzalez> kswedberg: redeploying now
[08:12:45] <kswedberg> thx, scott_gonzalez! fingers crossed
[08:12:48] <gnarf> hrm, 304?
[08:12:56] <nacin> gnarf: fastcgi_cache_valid 200 304 60s;
[08:13:10] <gnarf> yeah, what does it serve 304's for?
[08:13:20] <gnarf> not modified
[08:13:21] <gnarf> doh
[08:13:24] <gnarf> brain fart
[08:13:41] <nacin> I now have fastcgi_cache_valid 200 304 3m; in production
[08:13:44] <gnarf> makes sense
[08:14:18] <rworth> kswedberg did you see this comment? http://news.ycombinator.com/item?id=5024777 :)
[08:14:38] <gnarf> nacin: 1m didn't seem too terrible either
[08:14:43] <scott_gonzalez> umm...wat?
[08:14:53] <scott_gonzalez> I think half the Internet is smoking crack.
[08:14:59] <rworth> seriously
[08:15:00] <kswedberg> rworth: no, didn't see that. weird. comments, true. everything else, bizarre.
[08:15:05] <rworth> yup
[08:15:08] <scott_gonzalez> kswedberg: deployed finished successfully
[08:15:46] <kswedberg> scott_gonzalez: yay!!! thx!
[08:15:50] <scott_gonzalez> no problem
[08:16:04] <nacin> can we update to 3.5 final? currently RC1
[08:16:26] <scott_gonzalez> yeah
[08:18:44] <gnarf> nacin: i can do that later unless you wanna do it now
[08:18:53] <gnarf> nacin: I'd really appreciate figuring out this redirect thing too
[08:19:01] <nacin> gnarf: no rush. I am not sure what is to be done for updating, so I will leave it to you
[08:19:07] <nacin> gnarf: yeah, looking now
[08:19:29] <gnarf> nacin: i just download the new, untar it, and mv wordpress wordpress-old ; mv wordpress-3.5.... wordpress
[08:19:37] <gnarf> its super easy
[08:19:38] <gnarf> :)
[08:20:12] <nacin> figured it was managed in puppet
[08:23:35] <gnarf> nacin: just initial install at the moment
[08:23:47] <nacin> load is 2.02
[08:24:01] <gnarf> nacin: https://github.com/jquery/infrastructure/commit/d247ce96c15d4d81c3ef2e980ab4dc38b87601d2
[08:24:27] <nacin> nice idea on the logs as well
[08:24:28] <gnarf> nacin: just reloaded on that conf
[08:24:29] <nacin> was going to do that
[08:28:58] <jqcommit> [13api.jquery.com] 15NTICompass opened issue #209: Example code in the docs is hard to read  02http://git.io/WejS8A
[08:30:13] <ajpiano> rworth: kswedberg yeah i saw a similar comment elsewhere in this thread
[08:30:18] <ajpiano> people who think it's completley different documentation
[08:30:22] <ajpiano> not sure what they're thinking
[08:31:25] <ajpiano> it's funny there's a general sense that like we only set out to "make the docs prettier"
[08:31:40] <ajpiano> but we'll set 'em straight
[08:32:15] <gnarf> http://cl.ly/image/0d0b132H3J3j
[08:32:15] <ajpiano> oh man the #222 on code blocks is killing us though right now
[08:32:50] <gnarf> nacin: ^^^ i say that machine deserved a break :)
[08:34:15] <gnarf> nacin: http://citadel.jquery.com/zabbix/history.php?action=showgraph&itemid=22610
[08:35:13] <gnarf> ajpiano: yeah, that #222 is killer
[08:35:31] <ajpiano> i just tried to go into the wp-admin and remove it
[08:35:38] <ajpiano> but i get a redirect loop on http://jquery.com/wp-admin/network/
[08:36:19] <gnarf> ajpiano: http://cl.ly/image/44263n0T2k1p
[08:36:43] <ajpiano> i meant to actually change it so we don't get 10 more dupes in the next 6 hours
[08:36:49] <ajpiano> i know how to use the web inspector :p
[08:37:02] <gnarf> ajpiano: thats in web-base-template right?
[08:37:08] <ajpiano> yeah
[08:37:17] <ajpiano> we're in a weird state right now
[08:37:31] <ajpiano> cause we just made new-css into master and aren't quite ready to deploy yet
[08:37:34] <rworth> is there any where I can get http://local.jquerymobile.com/resources/ to work without nginx ? It works fine on stage. with nginx
[08:37:42] <gnarf> speaking of which, why are we re-naming it?
[08:37:57] <rworth> because web-base-template is a terrible name
[08:38:01] <ajpiano> ^^
[08:38:18] <gnarf> rworth: what are we renaming it too?
[08:38:24] <rworth> jquery-wp-content
[08:38:24] <ajpiano> jquery-wp-content
[08:38:35] <gnarf> okay, i'm getting started on changing that
[08:38:56] <rworth> gnarf I've got my commit ready. Give me the word and I'll push and rename the repo
[08:39:48] <ajpiano> gnarf: can you just edit the live file on the server or is that a really bad idea?
[08:39:56] <ajpiano> if you can, chnage it to #eee
[08:40:01] <ajpiano> otherwise, we'll live
[08:40:35] <gnarf> rworth: we might want to save this for a lull in traffic
[08:40:49] <gnarf> rworth: its gonna cause a few minutes of swapover i think
[08:40:57] <rworth> gnarf oh really?
[08:41:08] <gnarf> we can handle it i suppose
[08:41:23] <gnarf> if you send in your commit and change the repo name
[08:41:30] <gnarf> i should be able to hit deploy here
[08:41:37] <gnarf> and it should work....
[08:41:40] <rworth> is that a go?
[08:41:44] <gnarf> yeah, lets just do it
[08:41:48] <rworth> ok
[08:41:48] <gnarf> get it over with
[08:42:02] <rworth> so, you're ready when I am?
[08:42:36] <gnarf> yeah
[08:42:53] <ajpiano> the live sites won't change until we tag, right?
[08:43:04] <gnarf> this will do a fresh checkout...
[08:43:27] <gnarf> i can revert to the old commit in the meantime once we are on the right repo
[08:43:58] <ajpiano> ......ok
[08:44:06] <ajpiano> scott_gonzalez: you ok with this ^^
[08:44:44] <jqcommit> 01[13web-base-template01] 15rdworth pushed 1 new commit to 06master: 02http://git.io/JX4CFg
[08:44:44] <jqcommit> 13web-base-template/06master 141bd7783 15Richard D. Worth: Renamed web-base-template to jquery-wp-content
[08:46:37] <gnarf> so i need to cherry pick that on top of 6f3ce1da1cc4ce6c4c5a81417a6bc403b670f281 
[08:46:48] <rworth> NOTE: the repo formerly known as web-base-template has been renamed to jquery-wp-content
[08:46:57] <rworth> you wil have to update your clone
[08:47:11] <gnarf> testing this on stage first
[08:47:53] <scott_gonzalez> I'm not sure what's going on, but whatever it is, I'm sure I'm fine with it.
[08:48:59] <ajpiano> my local is 500ing
[08:49:09] <ajpiano> so is stage
[08:50:18] <gnarf> trying to fix on stage first
[08:50:30] <ajpiano> k, let me know what has to happen :p
[08:50:48] <gnarf> alright stage is up 
[08:50:57] <ajpiano> sweet
[08:51:01] <gnarf> this is on master 
[08:51:08] <gnarf> lemme test this bastard branch
[08:52:23] <gnarf> i need someone else to do a merge for this and push a commit for me
[08:53:05] <gnarf> rworth: git checkout 6f3ce1da1cc4ce6c4c5a81417a6bc403b670f281 ; git checkout -b temp-freeze ; git cherry-pick 1bd7783 
[08:53:08] <gnarf> solve the merge and push it?
[08:53:20] <gnarf> ajpiano: says we can't push current master
[08:53:23] <gnarf> to live
[08:53:26] <rworth> let me try
[08:57:59] <rworth> gnarf am I to push this on master if it works?
[08:58:27] <gnarf> rworth: nah, a branch is good enough
[08:58:41] <gnarf> i just need a commit to checkout right after i push the configs to live
[08:58:58] <gnarf> because we don't want "master" on live, we want 6f3ce1d + your commit
[08:59:17] <rworth> got it. give me 1 more sec
[09:06:37] <rworth> gnarf pushed
[09:06:40] <jqcommit> 01[13jquery-wp-content01] 15rdworth created 06temp-freeze (+1 new commit): 02http://git.io/TFfjng
[09:06:40] <jqcommit> 13jquery-wp-content/06temp-freeze 1441821de 15Richard D. Worth: Renamed web-base-template to jquery-wp-content...
[09:06:48] <gnarf> cool
[09:06:52] <ajpiano> rworth: is your local site working properly?
[09:07:06] <ajpiano> i updated my fork, updated my wp-config.php
[09:07:09] <rworth> yup
[09:07:19] <ajpiano> do i have to restart mamp or something
[09:07:28] <rworth> I had to restart mamp, yeah
[09:07:31] <gnarf> here goes nothing....
[09:07:44] <gnarf> did you move the directory from web-base-template to jquery-wp-content ?
[09:07:50] <scott_gonzalez> rworth: Do you know what those @override comments are?
[09:08:16] <rworth> scott_gonzalez I think they are something 47m uses, for some editor of theirs? I think we can get rid of them
[09:08:44] <scott_gonzalez> ok
[09:09:10] <rworth> so we pushing new master live later today?
[09:09:34] <scott_gonzalez> Yeah, we were talking about later today or tomorrow morning.
[09:09:46] <gnarf> alright - i just got live on jquery-wp-content
[09:10:16] <ajpiano> there we go
[09:10:16] <gnarf> now im gonna go make that color: #ccc change adam
[09:10:24] <ajpiano> gnarf: #eee
[09:10:25] <ajpiano> ;)
[09:10:33] <ajpiano> but awesome, that should help
[09:11:10] <ajpiano> http://cl.ly/image/07300n1v1v46
[09:11:21] <ajpiano> was gonna report another dupe, but web-base-template repo url changed
[09:11:41] <gnarf> ajpiano: the e's have it... 
[09:11:50] <gnarf> ajpiano: be sure to push that commit on master too ;)
[09:12:02] <ajpiano> which commit
[09:12:05] <gnarf> also, even though it's overriden, the background: should probably change there too
[09:12:12] <gnarf> ajpiano: a commit that adds the #eee to code
[09:12:19] <ajpiano> master already has a completely different syntax highlighting
[09:12:41] <ryanneufeld> ajpiano: while you're fixing colors... http://cl.ly/image/1p1Z1Y121t35
[09:12:49] <ryanneufeld> that blue is really bad
[09:12:55] <ajpiano> for the love of god guys
[09:13:06] <ajpiano> https://github.com/jquery/jquery-wp-content/issues/162
[09:13:10] <gnarf> ajpiano: okay yay new syntax highlighting
[09:13:40] <scott_gonzalez> damn, let's just deploy all the sites
[09:13:48] <rworth> +1
[09:13:54] <gnarf> everyone is here to fix any bugs
[09:13:57] <ajpiano> yeah
[09:13:58] <gnarf> its a good day
[09:13:58] <ajpiano> i agree
[09:14:00] <rworth> yeah
[09:14:02] <ajpiano> let's just do it
[09:14:05] <scott_gonzalez> Let me switch to the new repo first.
[09:14:14] <gnarf> same
[09:14:39] <scott_gonzalez> Can I just mv web-base-template jquery-wp-content, change my remote and pull?
[09:14:55] <ajpiano> scott_gonzalez: you have to make a change in your wp-config.php
[09:15:00] <scott_gonzalez> oh, right
[09:15:26] <gnarf> scott_gonzalez: yeah and what ajpiano said, worked for me
[09:15:49] <scott_gonzalez> Did you just `git remote set-url ...`?
[09:16:00] <gnarf> scott_gonzalez: yup
[09:16:21] <gnarf> mv web-base-template jquery-wp-content; cd jquery-wp-content; git remote set-url origin git@github.com:jquery/jquery-wp-content.git
[09:16:44] <gnarf> and wp-config.php change
[09:16:46] <scott_gonzalez> Yay, `git pull` was a fast-forward, so everything looks good.
[09:16:56] <gnarf> also, htaccess might need an update too
[09:17:04] <gnarf> for the resources rewrites
[09:17:18] <gnarf> rworth: so you were having resources/ issues?
[09:17:37] <scott_gonzalez> I don't have a reference to web-base-template in my .htaccess
[09:17:51] <gnarf> scott_gonzalez: ok, then the /resources/ prolly don't work for you
[09:17:56] <gnarf> ?
[09:17:57] <rworth> gnarf yeah, the jquerymobile.com site is unique in that it has a page called resources
[09:18:10] <gnarf> rworth: thats troubling
[09:18:12] <scott_gonzalez> They most certainly do :-)
[09:18:14] <rworth> the resources work fine, but I can't view the /resources/ page
[09:18:32] <rworth> nacin made it work one day. Works fine on stage. and prod
[09:18:33] <scott_gonzalez> jquerymobile.com needs to chagne.
[09:18:36] <gnarf> scott_gonzalez: oh yeah, its the favicon, not resources ;)
[09:18:39] <rworth> caus of nginx
[09:18:40] <scott_gonzalez> Well, they *should* change
[09:18:45] <ajpiano> +1
[09:18:54] <scott_gonzalez> gnarf: I have favicons too.
[09:18:57] <gnarf> can that page be renamed?
[09:19:22] <scott_gonzalez> gnarf: As easily as `mv resources.md bastards.md` :-)
[09:19:28] <rworth> that's a question for todd I'm sure
[09:19:33] <scott_gonzalez> I realize that's not what you were asking :-P
[09:19:38] <rworth> haha
[09:19:53] <gnarf> scott_gonzalez: heh - s/can/should/
[09:20:01] <scott_gonzalez> jquerymobile.com isn't going live right now though, right?
[09:20:14] <ajpiano> not during this, no
[09:20:33] <scott_gonzalez> Alright, let's do this.
[09:20:39] <scott_gonzalez> We're going to have a few minutes of busted sites.
[09:20:48] <ajpiano> should i do a warning tweet
[09:21:06] <scott_gonzalez> Nah, it should be quick.
[09:21:13] <ajpiano> ok
[09:21:16] <scott_gonzalez> Like, the amount of time it was taking api.jquery.com to load before :-P
[09:21:20] <ajpiano> ;)
[09:21:22] <gnarf> :)
[09:21:24] <rworth> exactly
[09:21:30] <scott_gonzalez> Ok, so we're all ready for this, right?
[09:21:34] <gnarf> ya
[09:21:36] <scott_gonzalez> ok
[09:21:42] <scott_gonzalez> Gonna go on a tagging spree.
[09:21:51] <scott_gonzalez> Let me get a list together first.
[09:23:12] <scott_gonzalez> web-base-template, api.jquery.com, api.jqueryui.com, api.jqueryui.com/1.8/, api.qunitjs.com, download.jqueryui.com, jquery.com, jqueryui.com, qunitjs.com, blog.jqueui.com
[09:23:32] <gnarf> nothing on learn/contribute
[09:23:33] <gnarf> ?
[09:23:36] <ajpiano> do a major release on jquery-wp-content
[09:23:43] <ajpiano> gnarf: no, they are not going live just quite yet
[09:24:21] <scott_gonzalez> Let me make sure it's safe to deploy download.jqueryui.com
[09:24:51] <gnarf> stage actually just deployed a new commit
[09:24:56] <gnarf> like 8m ago
[09:25:02] <gnarf> accorind to these deploy emails ;)
[09:26:10] <scott_gonzalez> Yeah, bug fix for the 1.10 release.
[09:26:31] <scott_gonzalez> It was the last remaining bug, and that code path won't be hit with this deploy.
[09:26:49] <gnarf> coo
[09:27:06] <scott_gonzalez> Ok, one more commit coming to fix a 3 year old annoyance on TR :-P
[09:27:16] <scott_gonzalez> Then I'll go tag crazy.
[09:31:49] <scott_gonzalez> ok, here we go
[09:34:48] <jqcommit> 01[13jquery-wp-content01] 15scottgonzalez tagged 062.0.0 at 06master: 02http://git.io/-oc65g
[09:35:04] <ajpiano> 2.0.0, feels good man
[09:36:00] <jquicommit> 01[13api.jqueryui.com01] 15scottgonzalez tagged 061.9.2-2 at 06master: 02http://git.io/pQGJwg
[09:36:17] <jquicommit> 01[13api.jqueryui.com01] 15scottgonzalez tagged 061.8.24 at 061-8: 02http://git.io/y6ATMQ
[09:36:28] <jqcommit> 01[13api.qunitjs.com01] 15scottgonzalez tagged 061.10.0-2 at 06master: 02http://git.io/HGzB8A
[09:37:38] <gnarf> i really <3 this process
[09:37:41] <gnarf> when it works
[09:37:59] <ajpiano> yeah
[09:38:03] <rworth> :)
[09:38:09] <gnarf> ut oh
[09:38:13] <gnarf> got a fail in one
[09:38:20] <gnarf> api.jqueryui.com
[09:38:29] <gnarf> couldn't create files/2013/01
[09:39:04] <gnarf> XML-RPC fault
[09:39:35] <gnarf> i dunno what that even means
[09:40:22] <scott_gonzalez> hmm...resource uploading failed.
[09:40:30] <jquicommit> 01[13jqueryui.com01] 15scottgonzalez pushed 1 new commit to 06master: 02http://git.io/-g2Khw
[09:40:31] <jquicommit> 13jqueryui.com/06master 1408e86a9 15Scott Gonz√°lez: Upgrade to download.jqueryui.com 1.9.2-1.
[09:40:42] <gnarf> scott_gonzalez: but whats this files/2013/01 jazz
[09:40:51] <jquicommit> 01[13jqueryui.com01] 15scottgonzalez tagged 061.9.2-3 at 06master: 02http://git.io/ubrL7w
[09:40:58] <scott_gonzalez> no idea
[09:41:10] <scott_gonzalez> Let me get the rest of these site, and we'll come back to that.
[09:41:12] <gnarf> I'm gonna try a manual deploy from the build dir
[09:42:24] <gnarf> yeah >> Error: XML-RPC fault: Unable to create directory files/2013/01. Is its parent directory writable by the server?  again /cc nacin
[09:42:36] <gnarf> i dunno where its even trying to do that
[09:43:03] <rworth> on my local system I've seen that directory and it's empty
[09:43:46] <gnarf> rworth: where?
[09:44:14] <scott_gonzalez> Well, the good news is that the site isn't hosed without the resources.
[09:44:31] <rworth> blogs.dir?
[09:44:39] <rworth> I blew it away with the rename :/
[09:45:01] <rworth> I would guess jquery-wp-content/blogs.dir though
[09:45:02] <nacin> hmm, why/when would that directory ever be wanted?
[09:45:24] <nacin> where does that fault occur?
[09:45:26] <gnarf> nacin: dunno, its an xml rpc error when deploying api.jqueryui.com
[09:45:29] <scott_gonzalez> shit
[09:45:31] <scott_gonzalez> blog.jqueryui.com
[09:45:32] <gnarf> trying to deploy the api.xml resource
[09:46:44] <gnarf> https://gist.github.com/0a66fa338e2b9dd55121 nacin
[09:46:50] <scott_gonzalez> I dropped back to the old design for now on blog.jqueryui.com
[09:48:27] <scott_gonzalez> jqueryui.com failed the same way.
[09:49:28] <jqcommit> 01[13jquery.com01] 15scottgonzalez tagged 061.9.0-beta1.3 at 06master: 02http://git.io/LA_x1Q
[09:50:45] <nacin> should I be able to find api.xml in the api.jqueryui.com repo?
[09:51:09] <scott_gonzalez> nacin: No, it's a generated file.
[09:51:32] <scott_gonzalez> `grunt build-wordpress` will generate it.
[09:51:47] <scott_gonzalez> It'll be in /dist/wordpress/resources/
[09:52:32] <nacin> and how does gw then use it?
[09:52:49] <scott_gonzalez> It uploads it as a gw-resource.
[09:53:01] <nacin> where?
[09:53:22] <scott_gonzalez> if ( ! defined( 'GW_RESOURCE_DIR' ) )
[09:53:23] <scott_gonzalez> 	define( 'GW_RESOURCE_DIR', dirname( WP_CONTENT_DIR ) . '/gw-resources/' .
[09:53:23] <scott_gonzalez> 		preg_replace( '/^\w+:\/\//', '', home_url() ) );
[09:53:37] <gnarf> and that directory is www-data writable
[09:53:40] <nacin> so, gw_add_resource()
[09:53:42] <gnarf> verified just now
[09:53:45] <nacin> gnarf: I just made it writable
[09:53:55] <nacin> it was 755 root:root
[09:53:59] <nacin> made it 775 root:www-data
[09:54:19] <scott_gonzalez> Other sites are not having issues uploading resources.
[09:54:25] <gnarf> drwxrwxr-x 7 root     www-data 4096 Dec 24 09:14 gw-resources
[09:54:34] <scott_gonzalez> Not sure why it would be different for jqueryui.com and api.jqueryui.com.
[09:54:36] <nacin> (oh, was referring to blogs.dir)
[09:55:02] <nacin> could you try again?
[09:55:28] <gnarf> just went 
[09:55:51] <gnarf> i swear that was 0775 root:www-data when i looked at it like 10 minutes ago too
[09:56:47] <nacin> scott_gonzalez: when rworth renamed web-base-template, he removed blogs.dir, which was being used as a temporary directory in gw_add_resource() before the file was moved into place. So more likely, everything worked an hour ago, nothing works now.
[09:57:17] <gnarf> nacin: everything but api.jqueryui.com deployed fine tho
[09:57:22] <gnarf> with resource pushes
[09:57:27] <gnarf> but thats good to know
[09:57:31] <scott_gonzalez> gnarf: jqueryui.com failed too.
[09:57:32] <gnarf> that blogs.dir needs to be there?
[09:57:51] <nacin> it needs to be there because gw_add_resource() does a standard upload before moving the file to the right spot
[09:58:12] <gnarf> nacin: can we make it use the gw-resources/ for the place, or does it need to be blogs.dir 
[09:58:22] <gnarf> i can add a thing to puppet to ensure that exists
[09:58:25] <gnarf> the blogs.dir
[09:58:27] <gnarf> if we need to
[09:58:53] <nacin> we could change it to upload to a different directory, yes
[09:59:10] <nacin> we could also just make gw-resources the standard WP upload directory and sidestep a lot of this
[09:59:56] <gnarf> nacin: i like how the gw-resources is organized right now, and that directory is already ensured by puppet
[10:00:11] <nacin> we could make it organized the same way
[10:00:17] <nacin> and keep it in the same place
[10:00:30] <nacin> just have WP upload things there, instead of the custom script
[10:00:54] <scott_gonzalez> nacin: We do checksum tracking in gw-resources.
[10:01:12] <scott_gonzalez> To make deploys faster when the files haven't changed.
[10:01:42] <gnarf> nacin: if we can also make gw-resources the upload directory so blogs.dir isn't necessary, i think this solves the only "issue"
[10:02:09] <gnarf> is that just a define() in wp-config ?
[10:02:37] <rworth> so the file will first go into gw-resources root and then be moved into the subfolder?
[10:02:40] <nacin> would be more stable as a filter.
[10:02:48] <nacin> rworth: nah, it'd upload directly to the subfolder.
[10:03:03] <scott_gonzalez> It only goes into blogs.dir because I hooked into the built-in upload functions.
[10:03:04] <nacin> I was going to do this originally, but uploads were very weird in multisite before 3.5.
[10:03:42] <nacin> one issue would be ensuring you get the exact filename you expect.
[10:04:05] <scott_gonzalez> I don't think we have any issues right now, we should just not kill blogs.dir :-)
[10:04:25] <nacin> sounds good to me
[10:05:06] <scott_gonzalez> gnarf: Do you want to redeploy jqueryui.com and api.jqueryui.com?
[10:05:13] <scott_gonzalez> Or do you want me to?
[10:05:19] <gnarf> scott_gonzalez: i did already
[10:05:19] <scott_gonzalez> I'm assuming you're already logged in.
[10:05:24] <scott_gonzalez> oh, both sites?
[10:05:32] <gnarf> scott_gonzalez: yeah
[10:05:35] <scott_gonzalez> awesome
[10:05:38] <scott_gonzalez> ok, on to blog.jqueryui.com
[10:05:39] <gnarf> scott_gonzalez: i got a solid build from both
[10:05:44] <scott_gonzalez> The new theme seems to totally die.
[10:05:59] <gnarf> scott_gonzalez: adding the ensure for blogs.dir INSIDE jquery-wp-content folder is just screwy
[10:06:04] <gnarf> cuz timing is weird
[10:06:29] <gnarf> gotta make sure it happens after the git clone
[10:06:49] <gnarf> are we gonna change this soon enough it doesn't matter, or should I add this ensure to puppet?
[10:07:29] <scott_gonzalez> Well, I guess that depends on whether nacin is going to change it.
[10:07:34] <scott_gonzalez> I would just leave it.
[10:07:45] * gnarf adds to puppet
[10:07:57] <scott_gonzalez> Where's the PHP error log on eol2?
[10:08:57] <nacin> I'll just leave it
[10:09:16] <gnarf> scott_gonzalez: might not be turned on
[10:10:39] <gnarf> scott_gonzalez: i'll turn it on
[10:10:47] <scott_gonzalez> ok
[10:12:09] <gnarf> scott_gonzalez: try to generate one? :)
[10:13:14] <scott_gonzalez> done
[10:13:20] <scott_gonzalez> http://blog.jqueryui.com/
[10:13:42] <scott_gonzalez> I'm not sure if there are errors or not.
[10:13:58] <scott_gonzalez> I assume there are.
[10:14:10] <gnarf> scott_gonzalez: [08-Jan-2013 18:13:54 UTC] PHP Fatal error:  Call to undefined function set_url_scheme() in /var/www/blog.jqueryui.com/wp-content/themes/jquery/menu-header.php on line 122
[10:14:18] <gnarf> scott_gonzalez: /var/log/php-errors.log
[10:14:25] <scott_gonzalez> thanks
[10:15:02] <scott_gonzalez> ugh, nacin is this a new thing in WP?
[10:15:22] <gnarf> scott_gonzalez: do we need latest over there?
[10:15:25] <gnarf> i can upgrade it
[10:15:26] <scott_gonzalez> Oh, wow, super new
[10:15:29] <scott_gonzalez> 3.5.0
[10:16:43] <scott_gonzalez> We can upgrade or I can copy the function over.
[10:16:50] <scott_gonzalez> Not sure what sites are still running on here.
[10:17:55] <scott_gonzalez> Actually, I can just drop this for blog.
[10:19:43] <scott_gonzalez> hmm...seems like the PHP file was being cached.
[10:19:52] <scott_gonzalez> I removed the function call and the error kept happening.
[10:20:31] <ryanneufeld> scott_gonzalez: you need to restart nginx
[10:20:40] <scott_gonzalez> o_O
[10:20:46] <ryanneufeld> APC cache
[10:20:54] <ryanneufeld> we do that in our production env as well
[10:21:04] <ryanneufeld> when we push new code, a graceful restart is needed
[10:21:10] <ryanneufeld> flushes the op-cache out of ram
[10:21:38] <scott_gonzalez> Here's what I just heard you say: We need to move the blog to jquery-wp-content ASAP :-P
[10:21:49] <ryanneufeld> is that not php?
[10:21:58] <ryanneufeld> if you change php files
[10:22:00] <scott_gonzalez> Well, we have a deploy process for it.
[10:22:01] <ryanneufeld> then you'll have to do that
[10:22:09] <ryanneufeld> if you don't
[10:22:13] <scott_gonzalez> We don't have a deploy process for the blog on eol2.
[10:22:17] <gnarf> scott_gonzalez:  - i got 3.5.0 up on there
[10:22:25] <scott_gonzalez> BAM!
[10:22:29] <scott_gonzalez> We've got a blog.
[10:22:54] <gnarf> scott_gonzalez: why isn't this on jquery-wp-content yet?
[10:22:57] <scott_gonzalez> ajpiano: Looks like I've got some commits to copy over ;-)
[10:23:06] <scott_gonzalez> Because we're supposed to be merging all the blogs.
[10:23:16] <gnarf> scott_gonzalez: oh yeah
[10:23:16] <scott_gonzalez> And we need to setup users so that authors get set properly.
[10:23:17] <rworth> the content isn't it github
[10:23:25] <gnarf> all these things
[10:23:26] <scott_gonzalez> The list goes on...
[10:23:27] <gnarf> thanks for the reminder
[10:24:14] <scott_gonzalez> Ok, I'm gonna dig through the style changes that landed since I made the new blog theme.
[10:24:23] <scott_gonzalez> Then I'll get back to the UI release.
[10:24:29] <scott_gonzalez> Really need to get that out today.
[10:30:19] <gnarf> afk a bit - grabbing some food
[10:30:30] <gnarf> phone in case of emergency
[10:41:41] <jqcommit> 01[13jquery-wp-content01] 15ajpiano pushed 1 new commit to 06master: 02http://git.io/XBF8Zw
[10:41:41] <jqcommit> 13jquery-wp-content/06master 144ede310 15adam j. sontag: *.jquery.org: Update navy to use same navy as membership program
[10:59:22] <jqcommit> 01[13jquery-wp-content01] 15ajpiano pushed 1 new commit to 06master: 02http://git.io/cSPXAA
[10:59:22] <jqcommit> 13jquery-wp-content/06master 14f060f8d 15adam j. sontag: Add jQuery 1.8.3 instead of jQuery 1.8.1 as local script fallback
[11:01:24] <scott_gonzalez> gnarf ryanneufeld: Do we need to restart nginx for css files too?
[11:01:34] <ryanneufeld> no
[11:01:45] <ryanneufeld> unless they're processed by PHP
[11:01:55] <ryanneufeld> I'm not sure what caching mech you have installed though
[11:01:58] <scott_gonzalez> Don't think so, but there are some PHP files that I updated too.
[11:01:59] <ryanneufeld> so you might have to clear that
[11:02:02] <scott_gonzalez> So we'll need to restart either way.
[11:02:05] <ryanneufeld> yah
[11:02:09] <scott_gonzalez> But I'm not seeing the CSS changes.
[11:02:09] <ryanneufeld> you can do a graceful
[11:02:12] <ryanneufeld> hmm
[11:02:24] <ryanneufeld> try a graceful
[11:02:27] <ryanneufeld> on nginx
[11:02:33] <scott_gonzalez> What's the command?
[11:02:43] <ryanneufeld> which machine?
[11:02:46] <scott_gonzalez> eol2
[11:03:20] <ryanneufeld> oh
[11:03:22] <ryanneufeld> that's apache
[11:03:40] <ryanneufeld> scott_gonzalez: I just ran it 
[11:03:49] <ryanneufeld> but on that machine `apache2ctl graceful`
[11:03:51] <ryanneufeld> is the command
[11:03:53] <ryanneufeld> as root
[11:04:39] <ryanneufeld> which site are you working on scott_gonzalez?
[11:04:40] <scott_gonzalez> Hmm...still not seeing it.
[11:04:43] <scott_gonzalez> blog.jqueryui.com
[11:05:03] <ryanneufeld> http://blog.jqueryui.com/wp-content/themes/jqueryui.com/style.css ?
[11:05:05] <scott_gonzalez> oh
[11:05:11] <scott_gonzalez> http://cl.ly/image/3v073A1N0C1K
[11:05:23] <ryanneufeld> oh
[11:05:25] <ryanneufeld> should do that
[11:06:07] <scott_gonzalez> Ok, did the db update
[11:06:49] <scott_gonzalez> hmm..
[11:09:01] <scott_gonzalez> nacin: Any idea why blog.jqueryui.com wouldn't be showing the theme updates?
[11:15:29] <nacin> what do you mean by that?
[11:16:42] <scott_gonzalez> I updated the files in the theme.
[11:16:46] <scott_gonzalez> But the site is loading the old files.
[11:16:50] <scott_gonzalez> Not sure what's caching it.
[11:16:56] <scott_gonzalez> ryanneufeld restarted apache.
[11:16:59] <scott_gonzalez> This is on eol2.
[11:17:52] <scott_gonzalez> I can try switching themes and then switching back.
[11:18:12] <scott_gonzalez> Nope, that didn't help.
[11:19:25] <ryanneufeld> scott_gonzalez: what file did you change?
[11:19:30] <scott_gonzalez> hmm..wait, something strange is going on.
[11:20:17] <scott_gonzalez> The files aren't updated.
[11:20:29] <scott_gonzalez> I'm so confused.
[11:20:40] <scott_gonzalez> I can see in the git log on the machine that the commit is there.
[11:20:50] <scott_gonzalez> I can view the diff of the commit with `git log -p`
[11:21:59] <scott_gonzalez> But if I look at the actual file, the change isn't there.
[11:22:09] <rworth> are you in a directory that no longer exists because it was renamed while you were in it?
[11:22:37] <scott_gonzalez> no
[11:23:05] <scott_gonzalez> I can log out and in to make absolutely certain though.
[11:23:11] <gnarf> scott_gonzalez: i moved some directories around when i updated wordpress
[11:23:33] <scott_gonzalez> I noticed, it had the 2011 and 2012 themes added.
[11:23:35] <gnarf> the git pull in that folder might be messed up, try a chown -R and reset --hard ?
[11:23:57] <scott_gonzalez> Well, I'm working as root.
[11:24:58] <scott_gonzalez> Nothing is helping.
[11:25:12] <gnarf> nacin: please do look into the redirect issue soon? :)
[11:25:19] <gnarf> scott_gonzalez: fresh clone maybe?
[11:25:33] <scott_gonzalez> ok, I'll try that
[11:26:39] <scott_gonzalez> Fresh clone worked.
[11:26:43] <nacin> gnarf: do I have WP admin access?
[11:26:44] <scott_gonzalez> I'm still very confused about what happened.
[11:26:54] <scott_gonzalez> http://blog.jqueryui.com/
[11:27:03] <gnarf> nacin: u/p in pm
[11:27:29] <scott_gonzalez> Looks like I forgot to style the author info.
[11:27:38] <scott_gonzalez> But at least the rest of the new design is live now.
[11:27:50] <nacin> gnarf: it's as simple as an issue in wp_blogs
[11:27:52] <nacin> the table
[11:28:26] <nacin> gnarf: most of them have "stage.*"
[11:28:33] <gnarf> nacin: ahh
[11:28:38] <gnarf> nacin: that sounds bad
[11:28:56] <nacin> gnarf: this explains a bug report I got over twitter that stage.* was creeping into the live site
[11:28:58] <gnarf> nacin: it shouldn't of ever been in stage mode, dunno why that would be that way
[11:29:29] <gnarf> this was also probably one of the FIRST "web-base-template" installs
[11:29:54] <nacin> gnarf: okay, should be fixed
[11:30:27] <nacin> we should also put a robots.txt file blocking stage.* from being crawled
[11:31:22] <gnarf> omg hugz! thanks - i spent like 2 hours trying to track that down one day ;)
[11:31:36] <gnarf> nacin: i assume this var dump is your debug?
[11:31:57] <nacin> gnarf: what var_dump? ;)
[11:32:05] <gnarf> :)
[11:32:16] <gnarf> print_r maybe?
[11:32:20] <gnarf> who knows with you php dudes
[11:32:23] <gnarf> :)
[11:36:18] <gnarf> so yay, network admin works again
[11:41:06] <ajpiano> yayy
[11:46:24] <jqcommit> [13api.jquery.com] 15dmethvin opened issue #211: Document that delegated events do not work for SVG  02http://git.io/0furMA
[11:50:25] <gnarf> so
[11:50:33] <gnarf> hate to bring up something I should already know the answer too
[11:50:41] <gnarf> but why hasn't jquery.com changed to be the new template yet?
[11:50:59] <ajpiano> cause there was no content for the home page
[11:51:03] <ajpiano> danheberden is working on it now
[11:51:12] <gnarf> k
[11:51:23] <danheberden> right meow
[11:51:40] <gnarf> aw-meow-some
[12:25:02] <jqcommit> 01[13jquery-wp-content01] 15scottgonzalez pushed 2 new commits to 06master: 02http://git.io/mX7ifg
[12:25:02] <jqcommit> 13jquery-wp-content/06master 14312c97e 15Scott Gonz√°lez: jqueryui.com: Fix demo source view.
[12:25:02] <jqcommit> 13jquery-wp-content/06master 14cf4231f 15Scott Gonz√°lez: base.css: Add missing semicolon.
[12:25:18] <jqcommit> 01[13jquery-wp-content01] 15scottgonzalez tagged 062.0.1 at 06master: 02http://git.io/PY_uqw
[12:40:18] <jqcommit> 01[13api.jquerymobile.com01] 15agcolom pushed 1 new commit to 06master: 02http://git.io/QbQIQQ
[12:40:18] <jqcommit> 13api.jquerymobile.com/06master 140681a43 15Anne-Gaelle Colom: created entry for makeUrlAbsolute
[12:49:07] <ajpiano> danheberden: when are we doing the portland website, the 14th or the 21st?
[12:50:09] <danheberden> 21st is the 'has to be done by' date
[12:50:12] <danheberden> ajpiano:  ^
[12:50:52] <ajpiano>  coolio
[13:28:52] <rworth> 14th is the save-the-date mention in the state of post that says the cfp and early bird tix will open on the 21st
[13:30:37] <ajpiano> gotcha
[13:51:41] <gnarf> so um
[13:51:48] <gnarf> scott_gonzalez: those view sources are still broken
[13:51:52] <gnarf> at least IMO
[13:52:12] <gnarf> the fact that the line numbers are still there when "hidden" is kinda weird don't ya think?
[13:52:29] <scott_gonzalez> clear cache?
[13:52:37] <gnarf> oh
[13:52:39] <gnarf> doh
[13:52:48] <gnarf> lol
[13:52:59] <scott_gonzalez> I had to change the markup to deal with the new syntax highlighter.
[13:53:34] <gnarf> the auto scroll demo on draggable seems broken
[13:53:41] <scott_gonzalez> You have no idea how mad it makes me that the HTML gets encoded as XHTML when we save it.
[13:53:58] <scott_gonzalez> It's only as broken as the code is :-)
[13:54:13] <gnarf> or rather scrolling on dragging seems broken ;)
[13:54:35] <scott_gonzalez> Don't worry, in 2022 we're releasing an all new draggable widget :-)
[13:54:53] <scott_gonzalez> It won't have this bug. I promise.
[13:55:23] <jqcommit> 01[13api.jquerymobile.com01] 15agcolom pushed 1 new commit to 06master: 02http://git.io/St9KVQ
[13:55:23] <jqcommit> 13api.jquerymobile.com/06master 145668aed 15Anne-Gaelle Colom: trying to add example to makeUrlAbsolute
[13:56:19] <scott_gonzalez> OMG, you did not just use onclick=""
[13:56:52] * gnarf glares at agcolom
[13:57:01] <scott_gonzalez> What is this nonsense anyway? $.mobile.path.makeUrlAbsolute
[13:57:11] <scott_gonzalez> I really hope that's just using an anchor under the hood.
[13:58:18] <scott_gonzalez> :-(
[13:58:19] <scott_gonzalez> https://github.com/jquery/jquery-mobile/blob/master/js/navigation/path.js
[13:58:24] <scott_gonzalez> That is insanity.
[13:59:16] <jqcommit> 01[13api.jquerymobile.com01] 15agcolom pushed 1 new commit to 06master: 02http://git.io/2JS4tg
[13:59:16] <jqcommit> 13api.jquerymobile.com/06master 1418afe07 15Anne-Gaelle Colom: makeUrlAbsolute:minor mod to example
[13:59:29] <gnarf> could you do it for arbitrary url? can you make a docfrag with a <base> tag?
[13:59:52] <scott_gonzalez> hmm...maybe
[14:00:00] <scott_gonzalez> What's the purpose of these APIs?
[14:00:47] <scott_gonzalez> http://stage.api.jquerymobile.com/jQuery.mobile.path.makeUrlAbsolute/
[14:01:02] <scott_gonzalez> That signature definition is not helpful.
[14:01:24] <scott_gonzalez> Also, the example description is wrong.
[14:02:02] <gnarf> scott_gonzalez: $("<div><base><a></a></div>").find("base").attr("href", "http://foo.com/a/b/c/test.html").end().find("a").attr("href", "../../omg.html")[0].href; doesn't seem to work ;)
[14:02:12] <gnarf> still uses root url
[14:02:13] <gnarf> er document url
[14:02:56] <scott_gonzalez> I'd still like to know why they need to do this.
[14:07:17] <agcolom> scott_gonzalez: hi!
[14:08:29] <scott_gonzalez> hey agcolom
[14:08:43] <scott_gonzalez> We were just talking about you and your dirty onclicks ;-)
[14:09:00] <agcolom> yes ;-)
[14:09:23] <agcolom> what else should I use?
[14:09:34] <agcolom> (I'm a bit lonely on here!
[14:10:05] <agcolom> is there a way of getting somethng added to the head of the example?
[14:10:39] <scott_gonzalez> agcolom: You can do whatever you want with the examples.
[14:10:49] <scott_gonzalez> https://github.com/jquery/api.jquerymobile.com/blob/master/entries2html.xsl
[14:11:30] <scott_gonzalez> You should be using .on( "click", ... ) instead of onclick=""
[14:11:42] <agcolom> ok and ok :-)
[14:11:49] <jqcommit> 01[13api.jquerymobile.com01] 15agcolom pushed 1 new commit to 06master: 02http://git.io/NstDbQ
[14:11:49] <jqcommit> 13api.jquerymobile.com/06master 1474f3277 15Anne-Gaelle Colom: fixed error in signature
[14:12:19] <agcolom> the other thing is that I got the same error as someone else when running grunt deploy...
[14:12:32] <agcolom> Error: XML-RPC fault: Unable to create directory files/2013/01. Is its parent directory writable by the server?
[14:12:48] <agcolom> and then I lost all code highlighting!
[14:13:36] <gnarf> agcolom: did you rename all things web-base-template yet?
[14:14:07] <agcolom> nope
[14:14:27] <gnarf> agcolom: should prolly do that, we renamed web-base-template to jquery-wp-content today
[14:14:31] <agcolom> I just did a git pull on api.jquerymobile.com
[14:14:43] <agcolom> oh... ok...
[14:14:57] <scott_gonzalez> Well, agcolom, do you have a local setup yet?
[14:15:11] <gnarf> oh, no local?
[14:15:15] <gnarf> its the stage! :)
[14:15:18] <gnarf> no blogs.dir
[14:15:22] * gnarf goes to make it
[14:16:17] <gnarf> agcolom: the next commit should deploy fine
[14:17:13] <agcolom> thank you :-)
[14:17:31] <agcolom> scott_gonzalez: euh... no :-( 
[14:19:24] <agcolom> scott_gonzalez: are there easy to follow instruction to set it up? (note that I did my 1st command-line git command in june, and I don't use these things in my day-time job :-( )
[14:20:39] <agcolom> ^ I should add 'unfortunately' ;-)
[14:22:09] <agcolom> I'll get rid of the dirty onclicks tomorrow... and will get the entry to the head of the example...
[14:23:12] <agcolom> bedtime here...
[14:23:25] <gnarf> i gotta run soon as well
[14:23:38] <agcolom> gnarf: thank you for your help :-)
[14:25:51] <agcolom> scott_gonzalez: will fix the example tomorrow... thank you too :-)
[15:16:41] <ajpiano> scott_gonzalez: just killed the white line on jquery.org
[15:16:47] <ajpiano> github is being janky though
[15:16:49] <ajpiano> but yay it's gone
[15:17:03] <ajpiano> headed out for the evening, catch you later or tomorrow
[15:27:51] <jqcommit> 01[13jquery-wp-content01] 15ajpiano pushed 1 new commit to 06master: 02http://git.io/ChcrKA
[15:27:51] <jqcommit> 13jquery-wp-content/06master 14bbb76a6 15adam j. sontag: All sites: Reconfigure site wide menu items
[15:52:20] <ryanneufeld> https://status.github.com/messages
[16:13:22] <jqcommit> 01[13jquery-wp-content01] 15ajpiano pushed 1 new commit to 06master: 02http://git.io/Hr0tFQ
[16:13:22] <jqcommit> 13jquery-wp-content/06master 1457a6676 15adam j. sontag: *.jquery.org: Remove unnecessary rule that was adding a white line below the project navigation
