[04:42:56] <hellyeah> can we say $(function() { ... } is replacement for $(document).read{ ... })
[04:45:24] <Cork> if you meant $(document).ready(function() {})
[04:45:25] <Cork> then yes
[04:45:38] <Cork> it has been a shorthand for it for ages
[04:45:44] <Cork> and is replacing it in 3.x
[04:46:46] <Cork> http://api.jquery.com/jQuery/#jQuery3
[04:47:06] <hellyeah> i see
[04:47:12] <hellyeah> i am just writing a blog
[04:47:16] <Cork> (version added: 1.0)
[04:48:23] <hellyeah> is it lazily loaded?
[04:48:27] <hellyeah> i mean
[04:48:33] <Cork> no
[04:48:42] <hellyeah> (function() { .. }()} just do immediate execution right
[04:49:02] <Cork> that is scoping (except the extra } at the end)
[04:49:27] <Cork> its normally written as (function() {})() or less commonly (function() {}())
[04:49:40] <Cork> and is just a self executing anonymous function
[04:49:49] <hellyeah> ops
[04:49:55] <hellyeah> it is )
[04:50:51] <Cork> $(function() {}) on the other hand is a callback passed to jquery to be executed when the page is loaded
[04:51:14] <hellyeah> ah
[04:51:17] <hellyeah> i see
[04:51:26] <Cork> hmm looks like the deprecation of .ready has been reverted
[04:52:12] <hellyeah> what do you mean?
[04:52:20] <hellyeah> i mean i dont know what revert means
[04:52:41] <Cork> https://github.com/jquery/jquery/issues/3025
[04:52:54] <Cork> ready used to be deprecated in 3.0, but it isn't anymore
[04:53:02] <Cork> not sure why
[04:54:50] <Cork> ah, it still is it's just not entered in the spec part of the page (its in the body)
[04:55:02] <Cork> "As of jQuery 3.0, only the first syntax is recommended; the other syntaxes still work but are deprecated."
[04:55:27] <Cork> wonder why it isn't in the description...
[09:45:40] <codecutter> https://pastebin.com/CLFabuhw
[09:55:09] <codecutter> here it is again https://pastebin.com/wuWGVDQf
[09:56:00] <Cork> is what?
[09:56:52] <shoky_> codecutter: put quotes around the url
[09:56:57] <shoky_> or data-ticker value, whatever
[09:57:23] <shoky_> or, don't build html manually in your js code :S
[09:57:40] <Cork> shoky_: he uses ' for the html attribute and " for js so it is correct
[09:58:06] <codecutter> +'url'+?
[09:58:08] <shoky_> data-ticker="+url+"
[09:58:13] <shoky_> no quotes around that url
[09:58:23] <codecutter> but thats what i have?
[09:58:25] <Cork> html doesn't require it
[09:58:25] <shoky_> codecutter:  data-ticker='"+url+"'
[09:58:35] <shoky_> Cork: it does if there are spaces in that url ;)
[09:58:52] <Cork> heh unless it is escaped with %20
[09:59:02] <Cork> but ya it should be there anyway
[09:59:07] <shoky_> his url is "Yell Plc-YELL"
[09:59:09] <codecutter> got it
[09:59:12] <Cork> of event better create it as elements instead of strings
[09:59:15] <shoky_> and he's getting   data-ticker="Yell" plc-yell=""
[09:59:25] <codecutter> thx
[09:59:42] <codecutter> <shoky_>	codecutter:  data-ticker='"+url+"' <-- this works
[09:59:50] <shoky_> yup
[10:00:17] <Cork> $('<a>', { class: "ticker", data: { ticker: url }, href: "/secure/ticker/"+word })[0]
[10:00:18] <shoky_> until you have a ' in your "url"  :P
[10:02:15] <codecutter> if not manually, what other options do i have?
[10:02:30] <shoky_> Cork just showed you one
[10:02:33] <codecutter> i'm using that data to append
[10:02:41] <codecutter> oh
[10:02:46] <codecutter> missed that
[10:02:51] <Cork> codecutter: you can't mix strings and elements though
[10:03:14] <Cork> so you would have to make sure everything is elements and then append an array of elements instead of a .join string
[10:03:35] <codecutter> whats the [0] for?
[10:03:41] <codecutter> oh
[10:03:42] <codecutter> nvm
[10:03:49] <Cork> it gives you the new raw element instead of a jquery wrapped one
[10:03:56] <codecutter> yes
[10:04:18] <Cork> best reason for doing it this way is that it gives you "free" xss protection
[10:05:17] <codecutter> thats outputs the actual link to the page
[10:05:23] <codecutter> that*
[10:05:37] <Cork> it gives you an htmllinkelement
[10:06:41] <codecutter> i'm seeing 'http://exmaple.com/secure/ticker/YELL'
[10:07:18] <codecutter> is that you mean?
[10:07:27] <codecutter> if so, that not what i'm after
[10:09:36] <Cork> codecutter: https://jsfiddle.net/1ye0cqav/2/
[10:10:03] <codecutter> hmm, see
[10:10:05] <Cork> like i said, this is not a string so you can't concat it with strings and expect to get html
[10:10:06] <codecutter> i see*
[10:11:35] <codecutter> i need the string
[10:11:41] <Cork> why?
[10:12:02] <codecutter> i need to place it in the mustache template
[10:12:20] <Cork> might be a better choice to run the template engine first
[10:12:27] <Cork> and then modify the result
[10:13:11] <codecutter> i'm building the template first then appending it
[10:13:20] <Cork> ya, like i said
[10:13:31] <Cork> might be a better choice to run the template engine first, and then modify it before appending the result
[10:13:38] <codecutter> template consists of a bunch of strings
[10:13:58] <Cork> well sure, but it has to be converted to elements before it can exist in the dom
[10:14:06] <Cork> so just do that before modifying the result
[10:14:08] <codecutter> i think i see what you mean
[10:14:32] <codecutter> i'll just stick with manual stuff for now
[10:14:36] <Cork> but ya, if you need to wrap random text with a link it won't work though
[10:14:55] <Cork> just note that you are xss suseptable with that solution
[10:15:22] <Cork> nothing prevents anyone to have word == "<script>/*evel script goes here */ </script>"
[10:15:31] <Cork> and that will run
[10:19:01] <codecutter> one more thing, i need to display a html box on listener ':hover" but the box depends on the data from server. When ':hover' is trigger i query the server for the data and construct a html node and append it to the document, will the box appear next to the cursor or at the bottom of the docs?
[10:19:04] <codecutter> doc*
[10:19:47] <Cork> codecutter: depends on how you position the element
[10:19:53] <codecutter> box should appear in close to here the cursor is at, obviously
[10:19:59] <Cork> so not dictated from what you described
[10:20:50] <codecutter> so how would i get the box to appear in proximity to the  hovered test?
[10:20:52] <codecutter> text*
[10:21:12] <Cork> you could use the event.pageX/Y variables to position it
[10:21:30] <codecutter> i see
[10:21:34] <Cork> https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/pageX
[11:10:32] <poboy> am I reading this correctly?  This means var userList is equal to the $results[$users]  array?  https://jsfiddle.net/nao186nr/  I can share the whole method if need be
[11:10:55] <catbadger> good morning my fellow earthings.
[11:11:02] <catbadger> earthlings
[11:11:04] <catbadger> lol
[11:11:29] <catbadger> So i have this ridiculous problem that i think is just user error, but I want to run it by a room of other people to confirm.
[11:13:58] <catbadger> our menu click events are handled directly ( el.click(function... ) and we're noticing that not all of the click events are being handled. It seems as though  like 5-10% of the click events are ignored. Now we think the user is shaky and is just dragging the mouse a small amount before the click. Is there a good mobile-friendly way to do this?
[11:15:00] <catbadger> I've tried delegating the events (thinking it was a problem with old jquery) then reverted that change and tried hijacking mouseup and pointerup and aiming them at the same funciton... no love. as a matter of fact pointerup seemed to not work about 40% of the time
[11:15:07] <catbadger> is there a good way to hunt this?
[11:16:10] <catbadger> sigh.. back to googling
[11:40:27] <MikeD_> catbadger: are you sure you don't have code somewhere that's cancelling event propagation?
[11:40:52] <MikeD_> also try changing the click to mousedown and try that on your problem user
[11:48:09] <catbadger> Thanks MikeD_
[11:58:38] <codecutter> how do i check if the variable is '0' or '0.00'?
[12:00:25] <codecutter> nvm
[12:03:13] <codecutter> actually variable be either a number (0.00) or a string ('0.00')
[12:03:21] <codecutter> how do i test for both?
[12:26:00] <shoky_> Number(value) === 0
[12:27:32] <catbadger> ooh the triple equals...  for when it absolutely has to be zero ;)
[14:34:40] <hydrian> Ello all
[14:35:32] <hydrian> What's the best way to detach an anonymous function attached to an event but still keep the function so it can be executed later.
[14:37:03] <hydrian> This is with jquery 1.12.4
[14:51:12] <shoky_> hydrian: detaching the function (i assume you mean e.g. calling .off() with a function)  doesn't make it unavailable
[14:52:22] <shoky_> function foo() {}     $().on('click', foo);  $().off('click', foo);    foo();
[14:57:55] <hydrian> I have remove/disable the original anoy function on the event. Add another custom function that will in turn call that original anon function.
[15:00:45] <hydrian> I basically have to inject my event function to they are run sequentially. And I don't control the code for the original JS function.
[15:01:11] * hydrian is trying to customize a netscaler.....
[15:04:46] <hydrian> shoky_: Wouldn't that just add a blank named function to the element's event?
[15:11:12] <shoky_> hydrian: sorry didn't notice you said anonymous... umm i can only think of a hacky way e.g. $._data(element).events['click'][0].handler
[15:12:04] <hydrian> I'm okay with hacky for now. This is just a PoC.
[15:58:50] <plamb_> if i do a .children.map(function(val, i){}) are the val's jquery objects
[16:09:38] <pavonia> plamb_: It's (index, elem) where elem is a DOM element. But you can use $(this) if you want the query element, IIRC
[16:14:33] <Al_nz1> a question about adding a set of fields for recording details about a person to a form dynamically. I did have a "add person" button which would take a peice of hidden code in the browser, unhide it and clone it. The problem with this solution is that my code is using a server side templating engine, and if my code to be cloned has something like <input th:field="${person[0].suranme}"> in it,
[16:14:34] <Al_nz1> it will never be rendered to the browser because at that point in time person[0].surname doesnt exist?
[16:16:25] <plamb_> pavonia, what about a .sort
[16:16:38] <plamb_> .sort(function(a,b){.....}
[16:16:44] <plamb_> would i just write $(a)
[16:17:17] <Al_nz1> robertmaxrees: rob - can you see channel history before you joined?
[16:18:17] <pavonia> plamb_: What do you mean? .sort isn't a JQuery function, is it?
[16:18:24] <plamb_> im not sure
[16:18:48] <plamb_> i guess not
[16:19:05] <plamb_> can i still wrap those variables and create jquery objects?
[16:20:51] <pavonia> Could you show some more code context?
[16:21:16] <plamb_> https://pastebin.com/7SixaYfj
[16:22:16] <pavonia> Well, what is priceList?
[16:22:33] <pavonia> A full fiddle would be helpful
[16:22:35] <plamb_> i got price list by doing a
[16:22:43] <plamb_> $('.instances').children()
[16:22:49] <plamb_> an array of jquery objects
[16:22:57] <plamb_> (i think)
[16:24:22] <pavonia> I don't thinks that's an JS array
[16:24:37] <plamb_> let me see if i can create a fiddle
[16:25:28] <pavonia> children().get().sort() maybe
[16:25:56] <plamb_> https://jsfiddle.net/plamb/6sud8x4e/
[16:26:13] <plamb_> oh can i only sort if its a JS array and not an array of jquery objects
[16:27:57] <plamb_> yeah you are probably right
[16:29:07] <plamb_> the question is if i have an array of dom elements
[16:29:18] <plamb_> can i wrap them in a $(...) inside the sort function
[16:29:50] <plamb_> my guess is no
[16:30:02] <robertmaxrees> do you just want a jquery object back?
[16:30:16] <robertmaxrees> like, are you trying to sort a jquery collection?
[16:30:24] <plamb_> yes actually
[16:30:31] <plamb_> is that possible without converting it to a js array?
[16:31:21] <robertmaxrees> jquery doesn't really have a sort method, tho I'd wonder why you're outputting out of order in the first place :)
[16:31:50] <plamb_> is it possible to sort a JS array and convert the elements of it to jquery objects?
[16:32:04] <robertmaxrees> js array of DOM elements you mean?
[16:32:08] <plamb_> yes
[16:32:48] <robertmaxrees> http://api.jquery.com/jQuery/#jQuery-elementArray
[16:33:04] <robertmaxrees> just pass the resulting array of DOM nodes through $()
[16:39:47] <plamb_> robertmaxrees: shouldnt pure javascript just work inside the .sort method
[16:40:50] <robertmaxrees> what do you mean?>
[16:41:30] <plamb_> like even if i dont have access to jquery when sorting an array of DOM elements, i should have access to javascript
[16:41:54] <robertmaxrees> errr, it's all javascript.
[16:42:01] <robertmaxrees> no sure what issue you're having...
[16:42:22] <plamb_> its not a question for this channel really i just get
[16:42:28] <plamb_> a.querySelector is not a function
[16:42:34] <plamb_> ill ask elsewhere though
[16:42:34] <robertmaxrees> what is "a"?
[16:42:54] <plamb_> a is a <li> element technically
[16:43:02] <robertmaxrees> is it a jquery object?
[16:43:16] <robertmaxrees> similar to what you're doing in https://jsfiddle.net/plamb/6sud8x4e/ ?>
[16:43:18] <plamb_> no, because i call priceList.get().sort(...)
[16:43:30] <plamb_> yeah i added .get() in front of that
[16:43:34] <robertmaxrees> one sec.
[16:44:07] <robertmaxrees> what is memval supposed to me?
[16:44:20] <robertmaxrees> *be'
[16:44:43] <plamb_> to make the code run it can just be an int
[16:44:48] <plamb_> var memVal = 1;
[16:45:04] <robertmaxrees> okay so.
[16:45:16] <robertmaxrees> notice how in that map you're doing return $(this)?
[16:45:21] <plamb_> yes
[16:45:40] <robertmaxrees> all priceLizt.get() does is convert priceLizt to a "normal" array.
[16:45:45] <robertmaxrees> it doesn't touch its contents.
[16:45:53] <plamb_> oh
[16:46:12] <plamb_> so it cant be sorted until its contents are just regular DOM objects?
[16:46:15] <robertmaxrees> which is why .find() works in there.
[16:46:24] <robertmaxrees> it can be sorted as-is.
[16:46:28] <robertmaxrees> you just can't sort a jquery object itself.
[16:46:33] <robertmaxrees> you can sort an array of jquery objects, though.
[16:46:36] <plamb_> oh
[16:46:38] <plamb_> interesting
[16:46:50] <plamb_> so .get().sort() should work
[16:46:54] <robertmaxrees> because jquery objects aren't technically arrays - they're array-like.
[16:47:00] <Al_nz1> hi robertmaxrees
[16:47:13] <robertmaxrees> yo
[16:58:51] <Jon30> hey guys, is there a common practice or a library that would save and pre-populate the form values when the back button is pressed to return to the form?
[17:03:00] <robertmaxrees> https://stackoverflow.com/a/14421723/923919
[17:03:04] <robertmaxrees> Jon30 ^
[17:03:07] <plamb_> robertmaxrees: what would be the best way to then replace the html inside $('.instances') with the elements of the sorted array (array of jquery objects)
[17:03:28] <robertmaxrees> plamb_ "best"?
[17:03:59] <plamb_> i tried $('.instances').html(sorted.forEach(function(elem){elem.html()}).toString())
[17:04:18] <robertmaxrees> erm.
[17:04:24] <robertmaxrees> mind updating the fiddle?
[17:04:48] <robertmaxrees> 'cause it looks like you're confused about waht forEach does :)
[17:06:32] <plamb_> https://jsfiddle.net/plamb/6sud8x4e/1/
[17:06:52] <plamb_> maybe i wanted .map
[17:08:48] <robertmaxrees> erm.
[17:08:58] <robertmaxrees> so your first problem is you're justy doing elem.html()
[17:09:10] <robertmaxrees> that's just grabbing the html for the element - not doing anything with it.
[17:09:44] <plamb_> well with that line i just want to replace the original <li>'s inside .instances with the <li>'s inside sorted
[17:10:39] <plamb_> oh
[17:10:45] <plamb_> maybe i want the .join() method
[17:10:54] <robertmaxrees> nah.
[17:11:00] <robertmaxrees> you can try but you'll see why that'll break :)
[17:11:23] <plamb_> lol still returns ",,,,," like toString
[17:11:34] <robertmaxrees> right.
[17:11:44] <robertmaxrees> soooo what do you think you should do?
[17:11:46] <robertmaxrees> pretty easy really.
[17:12:00] <plamb_> .html() returns the html of the jquery object right?
[17:12:17] <robertmaxrees> indeed
[17:13:08] <robertmaxrees> fwiw your sort is busted there.
[17:13:28] <robertmaxrees> because $(this).find("small").val(hourlyPrice) doesn't do what you think it does.
[17:14:10] <plamb_> it doesnt replace the elem's value with the hourlyPrice variable?
[17:14:19] <robertmaxrees> "value"?
[17:14:21] <robertmaxrees> ;)
[17:14:24] <robertmaxrees> .val() is for inputs.
[17:14:28] <plamb_> oh
[17:14:30] <plamb_> shite
[17:14:35] <plamb_> need .html() there too eh
[17:14:41] <robertmaxrees> also: your map method is doing some stuff it shouldn't.
[17:15:04] <plamb_> err
[17:15:06] <plamb_> .text()
[17:15:06] <robertmaxrees> you're modifying the document while using .map(), which is kind of janky.
[17:16:28] <plamb_> yeah i originally was just mapping over a json object that represent the document
[17:16:37] <plamb_> i just didnt want to reconstruct the HTML
[17:16:46] <robertmaxrees> but you have JSON for this?
[17:17:00] <plamb_> yeah i mean its only a 6 element array
[17:17:09] <robertmaxrees> that's going to be way easier than what you're doing heh.
[17:17:20] <robertmaxrees> you'
[17:17:26] <robertmaxrees> *you're trying to derive data you already have.
[17:19:13] <plamb_> yeah
[17:19:21] <robertmaxrees> mind tossing out the JSON?
[17:19:22] <plamb_> i wonder how many times i can ctrl+z in intellij :P
[17:19:25] <robertmaxrees> into that fiddle?
[17:19:41] <plamb_> i actually have one with the json and old code
[17:19:44] <robertmaxrees> also: are you not working with some kind of backend here?
[17:19:48] <plamb_> https://jsfiddle.net/plamb/4sawg130/10/
[17:20:04] <Al_nz1> I have some code that looks like this : https://jsfiddle.net/kyna8jhL/4/
[17:20:22] <robertmaxrees> are you just looking to sort that array and spit it out into the document?
[17:20:46] <plamb_> yes exactly
[17:20:57] <robertmaxrees> looks like by that hourlyprice calculation?
[17:21:01] <plamb_> yep
[17:21:21] <Al_nz1> I need to clone that code each time the add person button is clicked which is simple enough? But see those thymelef tags "th:field=*{person[0].surname}" they need to be inserted AFTER the clone button has been clicked
[17:22:26] <robertmaxrees> plamb_ one sec.
[17:24:44] <robertmaxrees> Al_nz1 so what's the question?
[17:27:57] <robertmaxrees> plamb_ so why did you bail on the sorted JSON thing?
[17:28:14] <plamb_> i got to the point i need to reconstruct HTML from it and spit it back into the document
[17:28:21] <robertmaxrees> that's pretty easy.
[17:28:23] <plamb_> and figured that was actually harder than the janky way i proposed
[17:28:45] <Al_nz1> robertmaxrees: this explains it : https://jsfiddle.net/kyna8jhL/7/
[17:28:59] <Al_nz1> robertmaxrees: I need to add the thymelead tags to each element after cloning
[17:30:13] <Al_nz1> https://jsfiddle.net/kyna8jhL/8/
[17:30:49] <Al_nz1> make sense?
[17:34:41] <Al_nz1> still about robertmaxrees ?
[17:40:06] <robertmaxrees> Al_nz1 i gotta dayjob too man.
[17:40:11] <robertmaxrees> gotta gimme a few.
[17:43:06] <robertmaxrees> plamb_ https://jsfiddle.net/robertmaxrees/v9tqbxae/
[17:43:10] <robertmaxrees> looks something like thjis.
[17:43:31] <robertmaxrees> Al_nz1 lemme rephrase - you've described the problem you're having - what have you tried?
[17:43:46] <plamb_> oh nice
[17:44:10] <plamb_> thank you
[17:45:38] <robertmaxrees> Al_nz1 because i think you're lost about how variabeles work heh.
[17:46:14] <robertmaxrees> Al_nz1 why are you doing $(newPerson) ?
[17:46:37] <Al_nz1> well I thought about keeping my code fragment in the JS - so that I could have the tymeleaf tags already in the html, then I would only be changing the index. I have thought about having the code fragment on the server and just pulling it when the add button is clicked. and I have thought about having the code fragment in the main page with out any thymeleaf in it,and adding the thymeleaf with
[17:46:37] <Al_nz1> jquery....I havent tried any of the approaches yet as I am not even sure which is best
[17:47:31] <Al_nz1> robertmaxrees: re $(newPerson) - you mean line 11?
[17:47:35] <robertmaxrees> yes.
[17:47:51] <robertmaxrees> why are you doing that on line 11?
[17:47:59] <Al_nz1> because that bit of code was when I was inserting the index number into the html
[17:48:08] <robertmaxrees> you realize tht'
[17:48:14] <robertmaxrees> *that's returning a new jquery object, right?
[17:48:15] <Al_nz1> ie person[0].surname
[17:48:36] <robertmaxrees> like, why not just newPerson.find()
[17:49:06] <robertmaxrees> as for "best", your entire setup seems strange to me.  odd that your templating engine needs to know the index of an element at all.
[17:49:24] <Al_nz1> newPerson = $('#person_template').clone(); <<- doesnt this give me a code fragment I can copy?
[17:49:44] <robertmaxrees> that does that, yes.
[17:49:54] <robertmaxrees> just pointing out that you're passing things back through jkquery when you don't need to at all.
[17:50:00] <Al_nz1> right, andn later on, line 11 I insert the index number
[17:50:16] <robertmaxrees> but you don';t need $(newPerson)
[17:50:18] <robertmaxrees> just newPerson
[17:50:27] <Al_nz1> ok
[17:50:53] <Al_nz1> well I think thymeleaf needs index for new persons, lemme try without
[17:53:11] <Al_nz1> actually - thats not going to work if I continue to try to use the same form to display existing episodes, and the same form to create new episodes
[17:53:26] <robertmaxrees> i'm way lost but ok.
[17:54:33] <Al_nz1> lost?
[17:55:00] <Al_nz1> there is a form that shows people, the exact same html is being used to display existing and create new.
[17:55:16] <Al_nz1> Im saying it might be easier to have seperate forms for create new to showing existing
[17:55:22] <robertmaxrees> ^^^^
[17:55:24] <robertmaxrees> new form for each.
[17:55:30] <robertmaxrees> imo.
[17:55:44] <robertmaxrees> unless you have a compelling reason for there to not be multiple forms.
[17:55:49] <Al_nz1> eaxctly
[17:55:51] <robertmaxrees> but either way, the index seems silly to me.
[17:57:36] <Al_nz1> but if I have a form for displaying a existing episode and they want to add people, i still end up needing that functionality
[17:58:02] <robertmaxrees> are you submitting via ajax?
[17:58:08] <robertmaxrees> or a normal form submit?
[17:58:08] <Al_nz1> no
[17:58:12] <Al_nz1> normal submit
[17:58:14] <robertmaxrees> okay,.
[17:58:16] <robertmaxrees> that's why,.
[17:58:24] <robertmaxrees> that makes more sense.
[17:58:38] <robertmaxrees> and you can do multiple additions at a time?
[17:59:29] <Al_nz1> each click of the add button should add one set of fileds for a new person
[17:59:37] <robertmaxrees> yeah alright.
[18:20:05] <Al_nz1> im lost on how to go about this
[18:20:30] <Al_nz1> even a new form isnt really the solution? because what if you are looking at a existing person and decide at that point you want to add another person?
[18:20:57] <robertmaxrees> a new form doesn't make sense because you want to be able to submit multiple people; at once.
[18:21:37] <Al_nz1> right, so forget new form
[18:21:56] <Al_nz1> I just want a way to add a code fragment to add new people. But there are two issues:
[18:22:46] <Al_nz1> (1) if the code fragment is in the html coming from server with the thymeleaf it must be valid and not refer to a objects in existance - or store the code fragment somewhere else AND
[18:23:05] <Al_nz1> (2) the code fragment needs to have the index updated for each <input>
[18:23:31] <Al_nz1> *not refer to object *not in existence
[18:23:45] <robertmaxrees> sounds like you need some client-side templating and to hold state about the current number available.
[18:24:00] <Al_nz1> yes - but were to store this fragment of code?
[18:24:11] <Al_nz1> could I get it from server when I click add button?
[18:24:16] <Al_nz1> or I could store it in the JS?
[18:24:25] <robertmaxrees> reason about it.
[18:24:29] <robertmaxrees> which makes more sense to you?
[18:24:42] <Al_nz1> well I like the JS since I am not fetching for each click
[18:24:57] <robertmaxrees> so then why not just do that?
[18:25:07] <Al_nz1> although once i get it into a var in JS, I would not have to fetch again?
[18:25:37] <robertmaxrees> why not just make it part of the initial page payload?
[18:26:23] <Al_nz1> because as if I put it in inital payload with the tymeleaf included - it will generate an error because the objects it refers to dont exist!
[18:26:32] <robertmaxrees> erm.
[18:26:38] <robertmaxrees> not as a normal html element.
[18:26:52] <Al_nz1> what sort of element?
[18:27:10] <robertmaxrees> as a globally available object.
[18:28:18] <Al_nz1> dunno what they are - googling - but I fear any th:...object would be pickedup anywhere in the html by the thymelead preprocessor
[18:28:24] <robertmaxrees> no.,
[18:28:26] <robertmaxrees> lol
[18:28:31] <robertmaxrees> you're misunderstanding.
[18:28:35] <robertmaxrees> it's not an element.
[18:30:33] <Al_nz1> well you said not a normal element, kinda suggests its still a element of sorts
[18:30:51] <robertmaxrees> sorry, didn't mean that at all.
[18:31:08] <robertmaxrees> https://jsfiddle.net/robertmaxrees/4vysmnfq/
[18:32:01] <robertmaxrees> could easily do something like this.
[18:32:37] <Al_nz1> trying to understand what that code does line by line
[18:32:44] <robertmaxrees> uh.
[18:32:45] <robertmaxrees> well.
[18:32:55] <Al_nz1> how is this any diferent to storing the code fragment in the js?
[18:33:01] <robertmaxrees> it's not.
[18:33:12] <robertmaxrees> other than you aren't cloning out of the document.
[18:33:31] <Al_nz1> so how is it better than just $('#personcontainer').append(newPerson);
[18:33:34] <Al_nz1> which is what I was doing>
[18:33:41] <robertmaxrees> huh?
[18:33:47] <robertmaxrees> you're jumping ahead.
[18:33:52] <robertmaxrees> this is where you get newPerson from.
[18:34:07] <Al_nz1> this being where?
[18:34:50] <robertmaxrees> really?
[18:35:14] <robertmaxrees> you make a generic global "namespace" so you don't store a bunch of random vars on window.
[18:35:17] <Al_nz1> what really?
[18:35:17] <robertmaxrees> so window.myGlobalNamespace = {}
[18:35:22] <robertmaxrees> then a prop in there called formTemplate
[18:35:29] <robertmaxrees> that has the tempalte for the form.
[18:35:50] <Al_nz1> robertmaxrees: not the whole form? just the fragment right?
[18:35:57] <robertmaxrees> whatever fragment you need./
[18:36:03] <Al_nz1> ok
[18:36:04] <robertmaxrees> if you need an entire form, then stick that in there.
[18:36:09] <robertmaxrees> otherwise, just the specific bit you need.
[18:36:49] <Al_nz1> then your doing the reaplce?
[18:37:00] <robertmaxrees> i mean, that's what that function does.
[18:37:02] <Al_nz1> then you can $('#personcontainer').append(newPerson); do the add like below?
[18:37:15] <robertmaxrees> easy enough to find out.
[18:37:38] <robertmaxrees> https://jsfiddle.net/robertmaxrees/4vysmnfq/1/
[18:38:26] <Al_nz1> ok, you going to be around for another 30? I am going to go away and have a go at a fiddle to make this try to do a simplified version of what I want?
[18:38:36] <Al_nz1> (30min not seconds :-) )
[18:39:28] <robertmaxrees> what's the question?
[18:39:36] <robertmaxrees> i might be around in a bit >.>
[18:39:42] <robertmaxrees> i might not be.
[18:39:49] <robertmaxrees> all depends on things.  like ~*my job*~
[18:39:57] <robertmaxrees> other folks in here should be able to help though :)
[18:40:29] <Al_nz1> ok - well I will try :-)
[18:40:31] <Al_nz1> anyway
[18:47:48] <Al_nz1> robertmaxrees: something like : https://jsfiddle.net/4vysmnfq/5/
[18:50:29] <robertmaxrees> so uh
[18:50:38] <robertmaxrees> you know how strings in js work, right?
[18:51:07] <Al_nz1> we about to talk about double escaping?
[18:51:21] <robertmaxrees> erhm, no.
[18:51:28] <robertmaxrees> strings can't be multiline
[18:52:04] <Al_nz1> so that code fragment (which is actually rather large) needs to go on one line????
[18:52:22] <robertmaxrees> https://jsfiddle.net/robertmaxrees/4vysmnfq/9/
[18:52:27] <robertmaxrees> you don'
[18:52:37] <robertmaxrees> but like, you can generate that server-side.
[18:53:01] <Al_nz1> generate what server side?
[18:53:05] <robertmaxrees> the string.
[18:53:07] <Al_nz1> this is all static code?
[18:53:22] <Al_nz1> the string will be static in the javascript file?
[18:53:26] <robertmaxrees> uh.
[18:53:30] <robertmaxrees> it doesn't have to be.
[18:53:44] <robertmaxrees> you've got some kind of server-side language, right?
[18:53:54] <Al_nz1> yes.
[18:54:04] <robertmaxrees> should be able to store as a template and then pump that out as a string with no carriage returnes in it.
[18:54:11] <Al_nz1> but, this is all later on....right now my button doesnt even run
[18:54:33] <robertmaxrees> (shrug) just telling you what the problem is.
[18:54:50] <Al_nz1> unexpected token ;
[18:55:00] <robertmaxrees> th: field = "*{persons[0].person.surname}"
[18:55:02] <robertmaxrees> wat
[18:55:20] <Al_nz1> thats what I want to inser into my code fragment
[18:55:33] <robertmaxrees> right, do you understand how .replace() works?
[18:55:37] <Al_nz1> remember I am putting in the thymelead
[18:55:40] <Al_nz1> thymeleaf
[18:55:48] <Al_nz1> yes it replaces code - I dont need the id
[18:55:52] <robertmaxrees> uh.
[18:55:58] <Al_nz1> so I am searching for the id
[18:56:05] <robertmaxrees> lol
[18:56:13] <Al_nz1> and replacing the id with my thymeleaf
[18:56:30] <robertmaxrees> where is the string {{ id="surname" }} ?
[18:56:35] <Al_nz1> ya
[18:56:51] <robertmaxrees> if the first arg is a string, it looks for an exact match.
[18:57:00] <robertmaxrees> woops
[18:57:41] <robertmaxrees> so if it's looking for an exact match, your first problem is there's no literal text in that string that matches {{ id="surname" }}
[18:58:06] <Al_nz1> but id=surname is in the html fragment
[18:58:14] <robertmaxrees> but it's looking for {{ id="surname" }}
[18:58:19] <robertmaxrees> with those curlies around it.
[18:59:24] <Al_nz1> righ
[18:59:30] <robertmaxrees> soooo
[18:59:40] <robertmaxrees> first part of the fix is what?
[18:59:52] <Al_nz1> right - changed - but the bloody button still ist calling myTemplateFunction
[18:59:55] <robertmaxrees> right.
[19:00:02] <robertmaxrees> because your replace is still busted.
[19:00:05] <robertmaxrees> it takes two strings.
[19:00:30] <robertmaxrees> th: field = "*{persons[0].person.surname}"
[19:00:34] <robertmaxrees> that needs to be a string as well.
[19:02:02] <robertmaxrees> make sense?
[19:03:09] <Al_nz1> by button is still not calling the function?
[19:03:20] <Al_nz1> and why is your function assigned to a var?
[19:03:21] <Al_nz1> https://jsfiddle.net/4vysmnfq/11/
[19:03:29] <robertmaxrees> lol
[19:03:48] <robertmaxrees> https://jsfiddle.net/robertmaxrees/4vysmnfq/13/
[19:03:54] <robertmaxrees> extra semicolon in there.
[19:04:07] <robertmaxrees> and functions are objects.
[19:04:41] <robertmaxrees> function someName() {} and var someName = function() {} do similar things.  i tend to prefer the latter.
[19:07:15] <Al_nz1> so like this : https://jsfiddle.net/4vysmnfq/14/
[19:07:28] <robertmaxrees> wat
[19:07:53] <robertmaxrees> i'm not even sure what you're trying to do there.
[19:07:54] <robertmaxrees> insertPerson() {?
[19:07:59] <robertmaxrees> var fragment = myTemplateFunction; ?
[19:08:35] <Al_nz1> insertPerson should be a function
[19:08:42] <Al_nz1> InsertPerson does two things:
[19:08:42] <robertmaxrees> so then update the code to make it right?
[19:09:05] <Al_nz1> calls myTemplateFunction and gets that fragment assigned to a var fargment
[19:09:12] <Al_nz1> fragment is then appended
[19:09:34] <robertmaxrees> so then update the code to be right :)
[19:09:36] <Al_nz1> well whats wrong with it the way it is?
[19:09:43] <robertmaxrees> really?
[19:09:56] <robertmaxrees> do you know how to write a function in javascript?
[19:10:13] <Al_nz1> https://jsfiddle.net/4vysmnfq/15/
[19:10:30] <robertmaxrees> and how to call a function?
[19:12:16] <Al_nz1> call() ?
[19:12:20] <robertmaxrees> ...
[19:12:35] <robertmaxrees> i can't tell if you're being serious or not.
[19:12:58] <Al_nz1> https://www.google.co.nz/search?q=call+a+function+in+javascript&ie=utf-8&oe=utf-8&client=firefox-b-ab&gfe_rd=cr&ei=kvSlWZ6yLKvM8geuroyQBA
[19:13:02] <robertmaxrees> var fragment = myTemplateFunction
[19:13:09] <robertmaxrees> this doesn't look wrong to you at all?
[19:13:57] <robertmaxrees> i'm genuinely curious.
[19:14:28] <Al_nz1> var fragment = myTemplateFunction(); ?
[19:14:38] <robertmaxrees> sure.
[19:14:47] <robertmaxrees> make sure that's above the event binding btw
[19:15:23] <Al_nz1> its still stuffed though
[19:15:23] <Al_nz1> https://jsfiddle.net/4vysmnfq/16/
[19:15:32] <robertmaxrees> make sure that's above the event binding btw
[19:15:33] <Al_nz1> sometimes all the formatting goes when I update the fiddle
[19:15:44] <robertmaxrees> "goes"?
[19:16:01] <Al_nz1> the text is all grey
[19:16:03] <Al_nz1> no color
[19:16:07] <Al_nz1> whats above what>
[19:16:09] <robertmaxrees> (shrug)
[19:16:17] <robertmaxrees> the function declaration above the event binding?
[19:16:30] <robertmaxrees> which words don't make sense?
[19:17:14] <Al_nz1> ok this seems to work : https://jsfiddle.net/4vysmnfq/17/
[19:17:27] <robertmaxrees> var myTemplateFunction = function(theText) {
[19:17:31] <robertmaxrees> are you doing anything with that argument?
[19:19:36] <Al_nz1> you mean 'theText' ?
[19:19:42] <robertmaxrees> yes
[19:20:45] <Al_nz1> clearly Im not
[19:20:52] <robertmaxrees> then why is it in there?
[19:20:53] <robertmaxrees> :)
[19:20:59] <Al_nz1> well you wrote it
[19:21:01] <Al_nz1> you tell me
[19:21:06] <robertmaxrees> really?
[19:21:20] <robertmaxrees> https://jsfiddle.net/robertmaxrees/4vysmnfq/1/
[19:21:25] <robertmaxrees> you tell me why it was there./
[19:21:26] <robertmaxrees> ;)
[19:22:26] <Al_nz1> right so you are passing in the text that you want replaced.
[19:22:40] <robertmaxrees> did you not glean that before?
[19:23:08] <Al_nz1> how is this better than just several lines of :
[19:23:10] <Al_nz1> return window.myGlobalNamespace.formTemplate.replace('{{ someText }}', theText);
[19:23:17] <Al_nz1> hardcoded with different variables
[19:23:28] <robertmaxrees> huh?
[19:23:43] <robertmaxrees> you said the number will need to update each time, right?>
[19:24:13] <Al_nz1> https://jsfiddle.net/4vysmnfq/18/
[19:24:28] <robertmaxrees> you said the number will need to update each time, right?>
[19:24:32] <Al_nz1> yes I will have to keep track of the index
[19:24:48] <robertmaxrees> so then how would that function know what number to use?
[19:25:11] <robertmaxrees> also: you could do a few different replaces if you wanted.  though what you just shared wouldn't work.
[19:25:11] <Al_nz1> it will look at the dom and count the number of a certain class
[19:25:28] <robertmaxrees> right, but myTemplateFunction shouldn't be "looking at" anything.
[19:25:33] <robertmaxrees> tell it what number to use.
[19:27:26] <Al_nz1> something like : https://jsfiddle.net/4vysmnfq/20/
[19:27:47] <robertmaxrees> lol
[19:27:56] <robertmaxrees> you realize that number won't ever change, right?
[19:28:07] <robertmaxrees> and also: $(this) isn't what you think it is there.
[19:28:34] <robertmaxrees> you want to check when you click the button
[19:29:24] <Al_nz1> ok so like this : var personIndex = $(this).closest('.container').find('.surname').length;
[19:29:31] <robertmaxrees> where?
[19:29:50] <Al_nz1> but for each call of replace, I really need to pass in two things : what I am looking for : what I want to repace
[19:29:50] <robertmaxrees> i feel like you're just sorta tossing stuff out and seeing what sticks.
[19:30:04] <Al_nz1> it will be different for each call
[19:30:22] <robertmaxrees> are you looking to replace the same things each time?
[19:30:30] <robertmaxrees> or a different thing each time?
[19:32:01] <Al_nz1> no - different thing each time, like for surname input, i need to find say id="surname" and replace it with th:field="*{persons[ +personIndex +].person.surname}
[19:32:12] <robertmaxrees> you're conflating.
[19:32:22] <robertmaxrees> there's one template, right?
[19:32:31] <robertmaxrees> and in that template, you need to replace a few different things.
[19:32:38] <Al_nz1> firstname would be id=firstname replaced with th:field="*{persons[0].person.firstname"}
[19:32:45] <Al_nz1> yes
[19:32:52] <robertmaxrees> lol
[19:33:07] <robertmaxrees> so then you need to replace the same set of things.
[19:33:18] <Al_nz1> yes
[19:33:28] <robertmaxrees> lol
[19:34:56] <Al_nz1> why is that funny?
[19:35:09] <robertmaxrees> because that's what I started with.
[19:35:15] <robertmaxrees> "are you looking to
[19:35:15] <robertmaxrees> replace the same things each time?
[19:35:48] <Al_nz1> yes
[19:35:56] <robertmaxrees> and you said that was not the case.
[19:36:25] <robertmaxrees> https://jsfiddle.net/robertmaxrees/a1patLgz/
[19:36:29] <robertmaxrees> (shrug) pretty easy.
[19:36:53] <Al_nz1> wait wait wait
[19:37:04] <robertmaxrees> ?
[19:37:23] <Al_nz1> if this html fragment is store in the JS (which it is) I can include the thymeleaf in the fragment and just update the index?
[19:37:46] <robertmaxrees> why wouldn't you be able to?
[19:37:58] <Al_nz1> so for each click of the button count the persons already present and then just change persons[i].person.surname to whatever value i is currently
[19:38:31] <robertmaxrees> https://jsfiddle.net/robertmaxrees/a1patLgz/1/
[19:38:36] <robertmaxrees> ;)
[19:38:38] <robertmaxrees> pretty easy.
[19:40:25] <Al_nz1> noooo
[19:40:28] <Al_nz1> wait
[19:40:34] <robertmaxrees> lol
[19:41:29] <robertmaxrees> dunno what's ambiguous here dude.
[19:43:38] * robertmaxrees is waiting
[19:45:04] <robertmaxrees> brb
[19:47:17] <Al_nz1> like this : https://jsfiddle.net/4vysmnfq/22/
[19:59:29] <Al_nz1> what the heck did you do to that html to get it into a big string?
[19:59:48] <robertmaxrees> back./
[20:00:09] <robertmaxrees> i deleted all of the newlines.
[20:00:26] <Al_nz1> how did you find them?
[20:00:41] <Al_nz1> or did you do that in a external editor?
[20:00:49] <robertmaxrees> external editor
[20:00:58] <Al_nz1> notepad++ ?
[20:01:04] <robertmaxrees> lol no.
[20:01:05] <robertmaxrees> vs code.
[20:01:11] <robertmaxrees> anything but np++ these days.
[20:02:18] <robertmaxrees> .replace('index', personIndex)
[20:02:26] <robertmaxrees> this will only replace the first instance of the word btw.
[20:03:48] <Al_nz1> how about : https://jsfiddle.net/4vysmnfq/23/
[20:03:57] <Al_nz1> robertmaxrees: only first instance
[20:03:59] <Al_nz1> shit
[20:04:12] <robertmaxrees> look back at that example i did earlier for that.
[20:04:20] <robertmaxrees> https://jsfiddle.net/robertmaxrees/a1patLgz/1/
[20:04:28] <robertmaxrees> notice the difference in that first argument to replace?
[20:05:49] <Al_nz1> like so : https://jsfiddle.net/4vysmnfq/24/ ?
[20:06:00] <robertmaxrees> look again duder.
[20:06:05] <robertmaxrees> '' indicates a string.
[20:06:11] <robertmaxrees> notice how my version does have the quotes?
[20:07:07] <Al_nz1> https://jsfiddle.net/4vysmnfq/25/ ?
[20:07:19] <Al_nz1> hard to know when it wants quotes and when it doesnt!
[20:07:54] <robertmaxrees> the difference it /this is a regular experession with the global flag/g vs 'this is a string'
[20:08:10] <robertmaxrees> the former will match all instances, the latter will only match the first.
[20:08:40] <Al_nz1> ok, well it seems to work - personIndex was undefined....but looking for why now
[20:08:54] <Al_nz1> ah
[20:08:57] <robertmaxrees> because you're not passign it in.
[20:09:00] <Al_nz1> because there was no surname
[20:09:18] <robertmaxrees> huh?
[20:09:22] <robertmaxrees> ah, that.
[20:09:40] <Al_nz1> ahh- ok working now
[20:09:42] <Al_nz1> nice
[20:10:17] <Al_nz1> but yes also - what if person is not yet on the form - there is no surname, so I must set the index to 0?
[20:10:30] <robertmaxrees> hrm?
[20:10:35] <robertmaxrees> like, if there isn't one already
[20:10:47] <robertmaxrees> ?
[20:11:24] <robertmaxrees> also: that code is going to create invalid html.
[20:11:51] <Al_nz1> why invalid?
[20:11:56] <robertmaxrees> \
[20:12:03] <robertmaxrees> * you're repeating IDs
[20:12:19] <Al_nz1> i can delete the dup id's
[20:12:22] <Al_nz1> i dont need em
[20:12:38] <Al_nz1> but more to the point my personIndex isnt counting existing persons correctly
[20:12:42] <Al_nz1> Im stuck on 0
[20:12:47] <Al_nz1> no matter how many i add
[20:12:55] <robertmaxrees> you sure $(this).closest('.container') is what you want?
[20:13:43] <Al_nz1> maybe it should be personcontainer>
[20:13:51] <robertmaxrees> except you can't repeat IDs ;)
[20:13:55] <robertmaxrees> gotta fix that first.
[20:14:00] <robertmaxrees> and with that gotta go.
[20:14:01] <robertmaxrees> bye
[20:14:25] <Al_nz1> thanks
[20:59:50] <Al_nz1> $('#personcontainer').find('.surname').length; <- is this count 1 indexed?
